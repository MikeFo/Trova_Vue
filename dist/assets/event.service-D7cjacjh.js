import{x as o}from"./index-CkJ7yJ3n.js";class v{async getEvents(r,e){try{return await o.get("/events/all/".concat(r))||[]}catch(t){return console.error("Failed to fetch events:",t),[]}}async getEvent(r){try{return await o.get("/events/".concat(r))}catch(e){return console.error("Failed to fetch event:",e),null}}async getEventsByMonth(r,e){try{const t=r.toString(),n=e<10?"0"+e.toString():e.toString();return await o.get("/events/month/".concat(t+n))||[]}catch(t){return console.error("Failed to fetch events by month:",t),[]}}async createEvent(r){try{return await o.post("/events/new",r)}catch(e){throw console.error("Failed to create event:",e),e}}async updateEvent(r,e,t,n,a){try{const s={...e,id:r};return t&&(s.tags=t),n&&(s.groups=n),a&&(s.managers=a),await o.patch("/events/edit",s)}catch(s){throw console.error("Failed to update event:",s),s}}async toggleAttendance(r,e={}){try{return await o.put("/events/".concat(r,"/attend"),e)}catch(t){throw console.error("Failed to toggle attendance:",t),t}}async rsvpToEvent(r,e){try{return await this.toggleAttendance(r,{})}catch(t){throw console.error("Failed to RSVP to event:",t),t}}async cancelRsvp(r,e){try{return await this.toggleAttendance(r,{})}catch(t){throw console.error("Failed to cancel RSVP:",t),t}}async deleteEvent(r){try{await o.delete("/events/".concat(r))}catch(e){throw console.error("Failed to delete event:",e),e}}async getUpcomingRSVPEvents(r,e){var t;try{let n="/events/user/".concat(r,"/rsvp/upcoming");e!=null&&(n+="?communityId=".concat(e));const a=await o.get(n),s=new Date;return(a||[]).filter(c=>new Date(c.startTime)>s).sort((c,l)=>new Date(c.startTime).getTime()-new Date(l.startTime).getTime())}catch(n){return n.status===404||((t=n.response)==null?void 0:t.status)===404?[]:(console.error("Failed to fetch upcoming RSVP events:",n),[])}}async shareEvent(r){try{return(await o.post("/events/".concat(r,"/share"),{})).shareUrl||"".concat(window.location.origin,"/tabs/events/").concat(r)}catch(e){return console.error("Failed to share event:",e),"".concat(window.location.origin,"/tabs/events/").concat(r)}}async toggleSaveEvent(r,e){try{return await o.put("/events/".concat(r,"/save"),{})}catch(t){throw console.error("Failed to toggle save event:",t),t}}}const h=new v;export{v as EventService,h as eventService};
