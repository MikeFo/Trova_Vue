!function(){function e(a){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(a)}function a(e,a){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=i(e))||a&&e&&"number"==typeof e.length){t&&(e=t);var r=0,n=function(){};return{s:n,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,c=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return l=e.done,e},e:function(e){c=!0,o=e},f:function(){try{l||null==t.return||t.return()}finally{if(c)throw o}}}}function t(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);a&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),t.push.apply(t,r)}return t}function r(e){for(var a=1;a<arguments.length;a++){var r=null!=arguments[a]?arguments[a]:{};a%2?t(Object(r),!0).forEach(function(a){n(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):t(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function n(e,a,t){return(a=g(a))in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function o(e){return function(e){if(Array.isArray(e))return l(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||i(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,a){if(e){if("string"==typeof e)return l(e,a);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?l(e,a):void 0}}function l(e,a){(null==a||a>e.length)&&(a=e.length);for(var t=0,r=Array(a);t<a;t++)r[t]=e[t];return r}function c(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,a,t="function"==typeof Symbol?Symbol:{},r=t.iterator||"@@iterator",n=t.toStringTag||"@@toStringTag";function o(t,r,n,o){var c=r&&r.prototype instanceof l?r:l,s=Object.create(c.prototype);return u(s,"_invoke",function(t,r,n){var o,l,c,u=0,s=n||[],d=!1,p={p:0,n:0,v:e,a:g,f:g.bind(e,4),d:function(a,t){return o=a,l=0,c=e,p.n=t,i}};function g(t,r){for(l=t,c=r,a=0;!d&&u&&!n&&a<s.length;a++){var n,o=s[a],g=p.p,h=o[2];t>3?(n=h===r)&&(c=o[(l=o[4])?5:(l=3,3)],o[4]=o[5]=e):o[0]<=g&&((n=t<2&&g<o[1])?(l=0,p.v=r,p.n=o[1]):g<h&&(n=t<3||o[0]>r||r>h)&&(o[4]=t,o[5]=r,p.n=h,l=0))}if(n||t>1)return i;throw d=!0,r}return function(n,s,h){if(u>1)throw TypeError("Generator is already running");for(d&&1===s&&g(s,h),l=s,c=h;(a=l<2?e:c)||!d;){o||(l?l<3?(l>1&&(p.n=-1),g(l,c)):p.n=c:p.v=c);try{if(u=2,o){if(l||(n="next"),a=o[n]){if(!(a=a.call(o,c)))throw TypeError("iterator result is not an object");if(!a.done)return a;c=a.value,l<2&&(l=0)}else 1===l&&(a=o.return)&&a.call(o),l<2&&(c=TypeError("The iterator does not provide a '"+n+"' method"),l=1);o=e}else if((a=(d=p.n<0)?c:t.call(r,p))!==i)break}catch(a){o=e,l=1,c=a}finally{u=1}}return{value:a,done:d}}}(t,n,o),!0),s}var i={};function l(){}function s(){}function d(){}a=Object.getPrototypeOf;var p=[][r]?a(a([][r]())):(u(a={},r,function(){return this}),a),g=d.prototype=l.prototype=Object.create(p);function h(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,d):(e.__proto__=d,u(e,n,"GeneratorFunction")),e.prototype=Object.create(g),e}return s.prototype=d,u(g,"constructor",d),u(d,"constructor",s),s.displayName="GeneratorFunction",u(d,n,"GeneratorFunction"),u(g),u(g,n,"Generator"),u(g,r,function(){return this}),u(g,"toString",function(){return"[object Generator]"}),(c=function(){return{w:o,m:h}})()}function u(e,a,t,r){var n=Object.defineProperty;try{n({},"",{})}catch(e){n=0}u=function(e,a,t,r){function o(a,t){u(e,a,function(e){return this._invoke(a,t,e)})}a?n?n(e,a,{value:t,enumerable:!r,configurable:!r,writable:!r}):e[a]=t:(o("next",0),o("throw",1),o("return",2))},u(e,a,t,r)}function s(e,a,t,r,n,o,i){try{var l=e[o](i),c=l.value}catch(e){return void t(e)}l.done?a(c):Promise.resolve(c).then(r,n)}function d(e){return function(){var a=this,t=arguments;return new Promise(function(r,n){var o=e.apply(a,t);function i(e){s(o,r,n,i,l,"next",e)}function l(e){s(o,r,n,i,l,"throw",e)}i(void 0)})}}function p(e,a){for(var t=0;t<a.length;t++){var r=a[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,g(r.key),r)}}function g(a){var t=function(a,t){if("object"!=e(a)||!a)return a;var r=a[Symbol.toPrimitive];if(void 0!==r){var n=r.call(a,t||"default");if("object"!=e(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(a)}(a,"string");return"symbol"==e(t)?t:t+""}System.register(["./index-legacy-D3_iwoP0.js"],function(e,t){"use strict";var n,i,l,u,s,g,h,v,f,b,m,y,x,k,w,C,I,O,S,P,j,U,T,_,A,z,R,N,L,q,F,E,M,D,Y,X,V,G,B,H,W,J,$,Q,Z,K,ee,ae,te;return{setters:[function(e){n=e.y,i=e.z,l=e.b6,u=e.T,s=e.F,g=e.r,h=e.a2,v=e.a4,f=e.Y,b=e.ap,m=e.O,y=e.b7,x=e.aU,k=e.R,w=e.a0,C=e.G,I=e.ag,O=e.a8,S=e.N,P=e.L,j=e.a6,U=e.b8,T=e.b9,_=e.af,A=e.aa,z=e.ab,R=e.ba,N=e.bb,L=e.W,q=e.v,F=e.a1,E=e.a3,M=e.I,D=e.J,Y=e.M,X=e.a$,V=e.aj,G=e.b0,B=e.H,H=e.ak,W=e.al,J=e.am,$=e.az,Q=e.bc,Z=e.aA,K=e.Z,ee=e.bd,ae=e.X,te=e.Q}],execute:function(){var t=document.createElement("style");t.textContent='.orgchart-container[data-v-a857bc53]{width:100%;height:100%;overflow:hidden;position:relative;cursor:grab;user-select:none;-webkit-user-select:none;touch-action:none}.orgchart-container[data-v-a857bc53]:active{cursor:grabbing}.orgchart[data-v-a857bc53]{position:relative;width:100%;height:100%;display:flex;align-items:flex-start;justify-content:center;transform-origin:center center;min-width:100%;min-height:100%}.org-node-wrapper[data-v-b4c018b6]{display:flex;flex-direction:column;align-items:center;position:relative;margin:20px}.org-node[data-v-b4c018b6]{background:#fff;border-radius:12px;padding:16px;min-width:200px;max-width:250px;box-shadow:0 2px 8px rgba(0,0,0,.1);border:2px solid #e5e7eb;cursor:pointer;transition:all .2s ease;position:relative}.org-node[data-v-b4c018b6]:hover{box-shadow:0 4px 12px rgba(0,0,0,.15);transform:translateY(-2px)}.org-node-selected[data-v-b4c018b6]{border-color:#2d7a4e;box-shadow:0 4px 16px rgba(45,122,78,.3)}.org-node-highlighted[data-v-b4c018b6]{border-color:#fbbf24;box-shadow:0 4px 16px rgba(251,191,36,.4)}.org-node-header[data-v-b4c018b6]{display:flex;align-items:center;justify-content:center;margin-bottom:12px;position:relative}.org-node-avatar[data-v-b4c018b6]{width:60px;height:60px;border-radius:50%;overflow:hidden;border:2px solid #e5e7eb}.org-node-avatar img[data-v-b4c018b6]{width:100%;height:100%;object-fit:cover}.org-node-avatar-placeholder[data-v-b4c018b6]{width:100%;height:100%;background:linear-gradient(135deg,#2d7a4e,#1db98a);display:flex;align-items:center;justify-content:center;color:#fff;font-size:24px;font-weight:600}.org-node-toggle[data-v-b4c018b6]{position:absolute;bottom:-12px;left:50%;transform:translate(-50%);width:28px;height:28px;border-radius:50%;background:#fff;border:2px solid #2d7a4e;display:flex;align-items:center;justify-content:center;cursor:pointer;z-index:10;transition:all .2s ease}.org-node-toggle[data-v-b4c018b6]:hover{background:#2d7a4e;color:#fff}.org-node-toggle ion-icon[data-v-b4c018b6]{font-size:16px;color:#2d7a4e}.org-node-toggle:hover ion-icon[data-v-b4c018b6]{color:#fff}.org-node-content[data-v-b4c018b6]{text-align:center}.org-node-name[data-v-b4c018b6]{font-size:16px;font-weight:600;color:#1a1a1a;margin-bottom:4px}.org-node-title[data-v-b4c018b6]{font-size:14px;color:#6b7280;margin-bottom:8px}.org-node-field[data-v-b4c018b6]{font-size:12px;color:#9ca3af;margin-bottom:4px}.org-node-children[data-v-b4c018b6]{display:flex;flex-direction:column;align-items:center;margin-top:40px;position:relative;opacity:1;transition:opacity .2s ease}.org-node-children[data-v-b4c018b6]:before{content:"";position:absolute;top:-20px;left:50%;transform:translate(-50%);width:2px;height:20px;background:#d1d5db}.org-node-collapsed[data-v-b4c018b6]{display:none;opacity:0}.org-group[data-v-b4c018b6]{display:flex;flex-direction:row;align-items:flex-start;justify-content:center;gap:20px;margin-bottom:20px;position:relative}.org-group[data-v-b4c018b6]:before{content:"";position:absolute;top:-20px;left:0;right:0;height:2px;background:#d1d5db}.org-node-child[data-v-b4c018b6]{position:relative}.org-node-child[data-v-b4c018b6]:before{content:"";position:absolute;top:-20px;left:50%;transform:translate(-50%);width:2px;height:20px;background:#d1d5db}@media (max-width: 768px){.org-node[data-v-b4c018b6]{min-width:160px;max-width:180px;padding:12px}.org-node-avatar[data-v-b4c018b6]{width:50px;height:50px}.org-node-name[data-v-b4c018b6]{font-size:14px}.org-node-title[data-v-b4c018b6],.org-node-field[data-v-b4c018b6]{font-size:11px}}.org-user-popup-overlay[data-v-2cb8ba1d]{position:fixed;top:0;left:0;right:0;bottom:0;background:rgba(0,0,0,.5);display:flex;align-items:center;justify-content:center;z-index:1000;backdrop-filter:blur(4px)}.org-user-popup[data-v-2cb8ba1d]{background:#fff;border-radius:16px;padding:24px;max-width:400px;width:90%;max-height:80vh;overflow-y:auto;box-shadow:0 20px 60px rgba(0,0,0,.3);position:relative;animation:popupFadeIn-2cb8ba1d .2s ease}@keyframes popupFadeIn-2cb8ba1d{0%{opacity:0;transform:scale(.9)}to{opacity:1;transform:scale(1)}}.org-user-popup-close[data-v-2cb8ba1d]{position:absolute;top:12px;right:12px;width:32px;height:32px;border-radius:50%;background:#f3f4f6;border:none;display:flex;align-items:center;justify-content:center;cursor:pointer;transition:all .2s ease}.org-user-popup-close[data-v-2cb8ba1d]:hover{background:#e5e7eb}.org-user-popup-close ion-icon[data-v-2cb8ba1d]{font-size:20px;color:#6b7280}.org-user-popup-header[data-v-2cb8ba1d]{text-align:center;margin-bottom:24px}.org-user-popup-avatar[data-v-2cb8ba1d]{width:100px;height:100px;border-radius:50%;object-fit:cover;border:4px solid #e5e7eb;margin-bottom:16px}.org-user-popup-avatar-placeholder[data-v-2cb8ba1d]{width:100px;height:100px;border-radius:50%;background:linear-gradient(135deg,#2d7a4e,#1db98a);display:flex;align-items:center;justify-content:center;color:#fff;font-size:40px;font-weight:600;margin:0 auto 16px}.org-user-popup-name[data-v-2cb8ba1d]{font-size:24px;font-weight:700;color:#1a1a1a;margin:0}.org-user-popup-content[data-v-2cb8ba1d]{margin-bottom:24px}.org-user-popup-field[data-v-2cb8ba1d]{margin-bottom:12px;font-size:14px;color:#4b5563;line-height:1.6}.org-user-popup-field strong[data-v-2cb8ba1d]{color:#1a1a1a;margin-right:8px}.org-user-popup-link[data-v-2cb8ba1d]{color:#2d7a4e;text-decoration:none}.org-user-popup-link[data-v-2cb8ba1d]:hover{text-decoration:underline}.org-user-popup-actions[data-v-2cb8ba1d]{display:flex;flex-direction:column;gap:12px}.org-user-popup-button[data-v-2cb8ba1d]{padding:12px 24px;background:#2d7a4e;color:#fff;border:none;border-radius:8px;font-size:14px;font-weight:600;cursor:pointer;transition:all .2s ease}.org-user-popup-button[data-v-2cb8ba1d]:hover{background:#1db98a;transform:translateY(-1px);box-shadow:0 4px 12px rgba(45,122,78,.3)}.org-user-popup-button[data-v-2cb8ba1d]:active{transform:translateY(0)}@media (max-width: 768px){.org-user-popup[data-v-2cb8ba1d]{padding:20px;max-width:90%}.org-user-popup-avatar[data-v-2cb8ba1d],.org-user-popup-avatar-placeholder[data-v-2cb8ba1d]{width:80px;height:80px}.org-user-popup-name[data-v-2cb8ba1d]{font-size:20px}}.org-chart-page-content[data-v-b3a3fe87]{--background: #f8fafc}.org-chart-search-container[data-v-b3a3fe87]{position:sticky;top:0;z-index:100;background:#fff;padding:16px;border-bottom:1px solid #e5e7eb;box-shadow:0 2px 4px rgba(0,0,0,.05)}.org-chart-search-wrapper[data-v-b3a3fe87]{position:relative;display:flex;align-items:center;max-width:600px;margin:0 auto}.search-icon[data-v-b3a3fe87]{position:absolute;left:12px;font-size:20px;color:#9ca3af;z-index:1}.org-chart-search-input[data-v-b3a3fe87]{width:100%;padding:12px 40px 12px 44px;border:2px solid #e5e7eb;border-radius:8px;font-size:14px;transition:all .2s ease}.org-chart-search-input[data-v-b3a3fe87]:focus{outline:none;border-color:#2d7a4e;box-shadow:0 0 0 3px rgba(45,122,78,.1)}.search-clear-button[data-v-b3a3fe87]{position:absolute;right:8px;width:28px;height:28px;border:none;background:transparent;display:flex;align-items:center;justify-content:center;cursor:pointer;border-radius:50%;transition:background .2s ease}.search-clear-button[data-v-b3a3fe87]:hover{background:#f3f4f6}.search-clear-button ion-icon[data-v-b3a3fe87]{font-size:18px;color:#6b7280}.search-results-dropdown[data-v-b3a3fe87]{position:absolute;top:100%;left:0;right:0;max-width:600px;margin:8px auto 0;background:#fff;border:1px solid #e5e7eb;border-radius:8px;box-shadow:0 4px 12px rgba(0,0,0,.1);max-height:400px;overflow-y:auto;z-index:200}.search-result-item[data-v-b3a3fe87]{display:flex;align-items:center;padding:12px 16px;cursor:pointer;transition:background .2s ease;border-bottom:1px solid #f3f4f6}.search-result-item[data-v-b3a3fe87]:last-child{border-bottom:none}.search-result-item[data-v-b3a3fe87]:hover{background:#f8fafc}.search-result-avatar[data-v-b3a3fe87]{width:40px;height:40px;border-radius:50%;object-fit:cover;margin-right:12px}.search-result-avatar-placeholder[data-v-b3a3fe87]{width:40px;height:40px;border-radius:50%;background:linear-gradient(135deg,#2d7a4e,#1db98a);display:flex;align-items:center;justify-content:center;color:#fff;font-size:16px;font-weight:600;margin-right:12px}.search-result-info[data-v-b3a3fe87]{flex:1}.search-result-name[data-v-b3a3fe87]{font-size:14px;font-weight:600;color:#1a1a1a;margin-bottom:4px}.search-result-meta[data-v-b3a3fe87]{font-size:12px;color:#6b7280}.search-result-meta span[data-v-b3a3fe87]{margin-right:8px}.org-chart-loading[data-v-b3a3fe87],.org-chart-error[data-v-b3a3fe87]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px;text-align:center}.org-chart-loading p[data-v-b3a3fe87]{margin-top:16px;color:#6b7280}.error-icon[data-v-b3a3fe87]{font-size:48px;color:#ef4444;margin-bottom:16px}.org-chart-error h3[data-v-b3a3fe87]{font-size:20px;font-weight:600;color:#1a1a1a;margin-bottom:8px}.org-chart-error p[data-v-b3a3fe87]{color:#6b7280;margin-bottom:24px}.org-chart-wrapper[data-v-b3a3fe87]{width:100%;height:calc(100vh - 200px);min-height:500px;position:relative;background:#f8fafc}.org-chart-empty[data-v-b3a3fe87]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px;text-align:center;color:#6b7280}.org-chart-empty-note[data-v-b3a3fe87]{margin-top:12px;font-size:12px;color:#9ca3af;font-style:italic}@media (max-width: 768px){.org-chart-search-container[data-v-b3a3fe87]{padding:12px}.org-chart-search-input[data-v-b3a3fe87]{padding:10px 36px 10px 40px;font-size:13px}.org-chart-wrapper[data-v-b3a3fe87]{height:calc(100vh - 180px);min-height:400px}}\n',document.head.appendChild(t);var re=function(){return e=function e(){!function(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}(this,e)},a=[{key:"createSecretCode",value:(r=d(c().m(function e(a,t){var r,o,s,d,p;return c().w(function(e){for(;;)switch(e.p=e.n){case 0:if(e.p=0,r=n(),o=r.firestore){e.n=1;break}throw new Error("Firestore not available");case 1:return s=i(o,"tempCodes/server/userCodes"),e.n=2,l(s,{createdAt:u.now(),communityId:a,slackUserId:t});case 2:return d=e.v,console.log("[OrgChartAuthService] Created Firebase document with ID:",d.id),e.a(2,d.id);case 3:throw e.p=3,p=e.v,console.error("[OrgChartAuthService] Failed to create secret code:",p),p;case 4:return e.a(2)}},e,null,[[0,3]])})),function(e,a){return r.apply(this,arguments)})}],a&&p(e.prototype,a),t&&p(e,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,a,t,r}(),ne=new re,oe=w(s({__name:"OrgChartContainer",props:{scale:{},translateX:{},translateY:{}},emits:["update:scale","update:translateX","update:translateY","center-on-node"],setup:function(e,a){var t=a.expose,r=a.emit,n=e,o=r;t({centerOnNode:F,centerOnRoot:function(){setTimeout(function(){var e=document.querySelector(".org-node-wrapper");e?F(e):j(0,0)},150)}});var i=g(n.scale||1),l=g(n.translateX||0),c=g(n.translateY||0),u=g(!1),s=g(0),d=g(0),p=g(0),w=g(0),C=g(0),I=g(1),O=g(!1),S=h(function(){return{transform:"matrix(".concat(i.value,", 0, 0, ").concat(i.value,", ").concat(l.value,", ").concat(c.value,")")}});function P(e){var a=Math.max(.2,Math.min(1,e));i.value=a,o("update:scale",a)}function j(e,a){l.value=e,c.value=a,o("update:translateX",e),o("update:translateY",a)}function U(e){0===e.button&&(u.value=!0,s.value=e.clientX,d.value=e.clientY,p.value=l.value,w.value=c.value)}function T(e){if(u.value){var a=e.clientX-s.value,t=e.clientY-d.value;j(p.value+a,w.value+t)}}function _(){u.value=!1}function A(){u.value=!1}function z(e){P(i.value+(e.deltaY>0?-.1:.1))}function R(e){if(e.length<2)return 0;var a=e[0].clientX-e[1].clientX,t=e[0].clientY-e[1].clientY;return Math.sqrt(a*a+t*t)}function N(e){2===e.touches.length?(O.value=!0,C.value=R(e.touches),I.value=i.value):1===e.touches.length&&(u.value=!0,s.value=e.touches[0].clientX,d.value=e.touches[0].clientY,p.value=l.value,w.value=c.value)}function L(e){if(O.value&&2===e.touches.length){var a=R(e.touches)/C.value;P(I.value*a)}else if(u.value&&1===e.touches.length){var t=e.touches[0].clientX-s.value,r=e.touches[0].clientY-d.value;j(p.value+t,w.value+r)}}function q(){u.value=!1,O.value=!1}function F(e){if(e){var a=document.querySelector(".orgchart-container");if(a){var t=a.getBoundingClientRect(),r=e.getBoundingClientRect(),n=a.querySelector(".orgchart");if(n){n.getBoundingClientRect();var o=t.width/2,u=t.height/2,s=o-(r.left-t.left+r.width/2),d=u-(r.top-t.top+r.height/2);j(l.value+s/i.value,c.value+d/i.value)}}}}return v(function(){return n.scale},function(e){void 0!==e&&e!==i.value&&(i.value=e)}),v(function(){return n.translateX},function(e){void 0!==e&&e!==l.value&&(l.value=e)}),v(function(){return n.translateY},function(e){void 0!==e&&e!==c.value&&(c.value=e)}),function(e,a){return k(),f("div",{class:"orgchart-container",onMousedown:U,onMousemove:T,onMouseup:_,onMouseleave:A,onWheel:b(z,["prevent"]),onTouchstart:N,onTouchmove:L,onTouchend:q},[m("div",{class:"orgchart",style:x(S.value)},[y(e.$slots,"default",{},void 0)],4)],32)}}}),[["__scopeId","data-v-a857bc53"]]),ie=["data-slack-id","data-node-id"],le={class:"org-node-header"},ce={class:"org-node-avatar"},ue=["src","alt"],se={key:1,class:"org-node-avatar-placeholder"},de=["aria-label"],pe={class:"org-node-content"},ge={class:"org-node-name"},he={key:0,class:"org-node-title"},ve={key:1,class:"org-node-field"},fe={key:2,class:"org-node-field"},be={key:3,class:"org-node-field"},me={key:4,class:"org-node-field"},ye=s({__name:"OrgChartNode",props:{datasource:{},displayFlags:{},groupScale:{},isSelected:{type:Boolean},isHighlighted:{type:Boolean},highlightedSlackId:{}},emits:["node-click","select-node"],setup:function(e,a){var t=a.expose,r=a.emit,n=g(null);t({nodeElement:n});var i=e,l=r,c=h(function(){return i.groupScale||3}),u=g(!1),s=g([]),d=g(null),p=g(i.isHighlighted?i.datasource.slackId:null),y=h(function(){return i.datasource.children&&i.datasource.children.length>0}),x=h(function(){return i.displayFlags}),w=h(function(){if(!i.datasource.children||0===i.datasource.children.length)return[];for(var e=[],a=i.datasource.children,t=0;t<a.length;t+=c.value)e.push(a.slice(t,t+c.value));return e});function N(){y.value&&(u.value&&s.value.length>0&&i.datasource.children&&(i.datasource.children=o(s.value),s.value=[]),u.value=!u.value)}function L(){l("node-click",i.datasource),l("select-node",i.datasource.id)}function q(e){l("node-click",e)}function F(e){d.value=e,l("select-node",e)}return C(function(){var e,a,t;console.log("[OrgChartNode] Mounted with datasource:",{name:i.datasource.name,id:i.datasource.id,childrenCount:(null===(e=i.datasource.children)||void 0===e?void 0:e.length)||0,expandedChildrenSlackIds:i.datasource.expandedChildrenSlackIds}),i.datasource.children&&i.datasource.children.length>0&&(s.value=o(i.datasource.children));var r=i.highlightedSlackId&&(null===(a=i.datasource.children)||void 0===a?void 0:a.some(function(e){return e.slackId===i.highlightedSlackId}));if(i.isHighlighted||r)console.log("[OrgChartNode] Node is highlighted or has highlighted child, showing all children"),r&&s.value.length>0&&(i.datasource.children=o(s.value),console.log("[OrgChartNode] Restored all children to show siblings")),u.value=!1;else if(i.datasource.expandedChildrenSlackIds&&i.datasource.expandedChildrenSlackIds.length>0){if(i.datasource.children&&i.datasource.children.length>0){var n=i.datasource.children.filter(function(e){return i.datasource.expandedChildrenSlackIds.includes(e.slackId)});console.log("[OrgChartNode] Filtered children:",{total:i.datasource.children.length,filtered:n.length}),n.length>0&&n.length<i.datasource.children.length&&(i.datasource.children=n),u.value=!1}}else i.datasource.children&&i.datasource.children.length>0&&(console.log("[OrgChartNode] No expandedChildrenSlackIds, expanding by default"),u.value=!1);console.log("[OrgChartNode] Final state:",{isCollapsed:u.value,hasChildren:y.value,childrenCount:(null===(t=i.datasource.children)||void 0===t?void 0:t.length)||0})}),v(function(){return i.isHighlighted},function(e){e&&(p.value=i.datasource.slackId)}),function(a,t){var r=R("OrgChartNode",!0);return k(),f("div",{class:"org-node-wrapper","data-slack-id":e.datasource.slackId,"data-node-id":e.datasource.id,ref_key:"nodeWrapper",ref:n},[m("div",{class:_(["org-node",{"org-node-selected":e.isSelected,"org-node-highlighted":e.isHighlighted}]),onClick:L},[m("div",le,[m("div",ce,[e.datasource.profilePicture?(k(),f("img",{key:0,src:e.datasource.profilePicture,alt:e.datasource.name},null,8,ue)):(k(),f("div",se,O(e.datasource.name.charAt(0).toUpperCase()),1))]),y.value?(k(),f("button",{key:0,class:"org-node-toggle",onClick:b(N,["stop"]),"aria-label":u.value?"Expand":"Collapse"},[S(P(j),{icon:u.value?P(U):P(T)},null,8,["icon"])],8,de)):I("",!0)]),m("div",pe,[m("div",ge,O(e.datasource.name),1),e.datasource.title&&x.value.showTitle?(k(),f("div",he,O(e.datasource.title),1)):I("",!0),e.datasource.department&&x.value.showDepartment?(k(),f("div",ve,O(e.datasource.department),1)):I("",!0),e.datasource.location&&x.value.showLocation?(k(),f("div",fe,O(e.datasource.location),1)):I("",!0),e.datasource.role&&x.value.showRole?(k(),f("div",be,O(e.datasource.role),1)):I("",!0),e.datasource.team&&x.value.showTeam?(k(),f("div",me,O(e.datasource.team),1)):I("",!0)])],2),y.value?(k(),f("div",{key:0,class:_(["org-node-children",{"org-node-collapsed":u.value}])},[(k(!0),f(A,null,z(w.value,function(e,a){return k(),f("div",{key:"group-".concat(a),class:"org-group"},[(k(!0),f(A,null,z(e,function(e){return k(),f("div",{key:e.id||e.slackId,class:"org-node-child"},[S(r,{datasource:e,"display-flags":x.value,"group-scale":c.value,"is-selected":d.value===e.id,"is-highlighted":p.value===e.slackId,"highlighted-slack-id":p.value||i.highlightedSlackId,onNodeClick:q,onSelectNode:F},null,8,["datasource","display-flags","group-scale","is-selected","is-highlighted","highlighted-slack-id"])])}),128))])}),128))],2)):I("",!0)],8,ie)}}}),xe=w(ye,[["__scopeId","data-v-b4c018b6"]]),ke={class:"org-user-popup-header"},we=["src","alt"],Ce={key:1,class:"org-user-popup-avatar-placeholder"},Ie={class:"org-user-popup-name"},Oe={class:"org-user-popup-content"},Se={key:0,class:"org-user-popup-field"},Pe=["href"],je={key:1,class:"org-user-popup-field"},Ue={key:2,class:"org-user-popup-field"},Te={key:3,class:"org-user-popup-field"},_e={key:4,class:"org-user-popup-field"},Ae={key:5,class:"org-user-popup-field"},ze=s({__name:"OrgChartUserPopup",props:{isOpen:{type:Boolean},user:{},position:{}},emits:["close"],setup:function(e,a){var t=a.emit,r=e,n=t,o=h(function(){return r.position?{position:"fixed",left:"".concat(r.position.x,"px"),top:"".concat(r.position.y,"px"),transform:"translate(-50%, -50%)"}:{}});function i(){n("close")}function l(){i()}function c(){var e=r.user;if(null!=e&&e.slackId){var a="slack://user?team=".concat(s(),"&id=").concat(e.slackId);window.location.href=a,setTimeout(function(){var a="https://app.slack.com/client/".concat(s(),"/user/").concat(e.slackId);window.open(a,"_blank")},1e3)}}function u(){var e=r.user;if(null!=e&&e.slackId){var a="slack://channel?team=".concat(s(),"&id=").concat(e.slackId);window.location.href=a,setTimeout(function(){var a="https://app.slack.com/client/".concat(s(),"/im/").concat(e.slackId);window.open(a,"_blank")},1e3)}}function s(){return new URLSearchParams(window.location.search).get("slackTeamId")||""}return function(a,t){return e.isOpen&&e.user?(k(),f("div",{key:0,class:"org-user-popup-overlay",onClick:l},[m("div",{class:"org-user-popup",onClick:t[0]||(t[0]=b(function(){},["stop"])),style:x(o.value)},[m("button",{class:"org-user-popup-close",onClick:i},[S(P(j),{icon:P(N)},null,8,["icon"])]),m("div",ke,[e.user.profilePicture?(k(),f("img",{key:0,src:e.user.profilePicture,alt:e.user.name,class:"org-user-popup-avatar"},null,8,we)):(k(),f("div",Ce,O(e.user.name.charAt(0).toUpperCase()),1)),m("h3",Ie,O(e.user.name),1)]),m("div",Oe,[e.user.email?(k(),f("div",Se,[t[1]||(t[1]=m("strong",null,"Email:",-1)),m("a",{href:"mailto:".concat(e.user.email),class:"org-user-popup-link"},O(e.user.email),9,Pe)])):I("",!0),e.user.department?(k(),f("div",je,[t[2]||(t[2]=m("strong",null,"Department:",-1)),L(" "+O(e.user.department),1)])):I("",!0),e.user.location?(k(),f("div",Ue,[t[3]||(t[3]=m("strong",null,"Location:",-1)),L(" "+O(e.user.location),1)])):I("",!0),e.user.role?(k(),f("div",Te,[t[4]||(t[4]=m("strong",null,"Role:",-1)),L(" "+O(e.user.role),1)])):I("",!0),e.user.team?(k(),f("div",_e,[t[5]||(t[5]=m("strong",null,"Team:",-1)),L(" "+O(e.user.team),1)])):I("",!0),e.user.title?(k(),f("div",Ae,[t[6]||(t[6]=m("strong",null,"Title:",-1)),L(" "+O(e.user.title),1)])):I("",!0)]),m("div",{class:"org-user-popup-actions"},[m("button",{class:"org-user-popup-button",onClick:c}," View Trova Profile in Slack "),m("button",{class:"org-user-popup-button",onClick:u}," Message in Slack ")])],4)])):I("",!0)}}}),Re=w(ze,[["__scopeId","data-v-2cb8ba1d"]]),Ne={class:"org-chart-search-container"},Le={class:"org-chart-search-wrapper"},qe={key:0,class:"search-results-dropdown"},Fe=["onClick"],Ee=["src","alt"],Me={key:1,class:"search-result-avatar-placeholder"},De={class:"search-result-info"},Ye={class:"search-result-name"},Xe={class:"search-result-meta"},Ve={key:0},Ge={key:1},Be={key:0,class:"org-chart-loading"},He={key:1,class:"org-chart-error"},We={key:2,class:"org-chart-wrapper"},Je={key:3,class:"org-chart-empty"},$e=s({__name:"OrgChartPage",setup:function(e){var t=E(),n=B(),i=q(),l=F(),u=g(null),s=g(""),p=g(null),h=g(""),b=g(""),y=g(3),x=g(""),w=g(!0),U=g(null),T=g(null),_=g([]),R=g([]),re=g({showTitle:!0,showLocation:!0,showRole:!0,showDepartment:!0,showTeam:!0}),ie=g(1),le=g(0),ce=g(0),ue=g(""),se=g([]),de=g(null),pe=g(!1),ge=g(null),he=g(void 0),ve=g(null),fe=g(null);function be(){var e,a,r,n,o=t.query;if(u.value=o.communityId?Number(o.communityId):l.currentCommunityId||null,s.value=o.slackUserId||(null===(e=i.user)||void 0===e?void 0:e.slackId)||(null===(a=i.user)||void 0===a?void 0:a.slackUserId)||"",x.value=o.s||"",!u.value||!s.value||!x.value){var c=X.getCurrentValidation();c&&(u.value||(u.value=c.communityId,console.log("[OrgChartPage] Using communityId from validated session:",c.communityId)),s.value||(s.value=c.slackUserId,console.log("[OrgChartPage] Using slackUserId from validated session:",c.slackUserId)),x.value||(x.value=c.secretId,console.log("[OrgChartPage] Using secretId from validated session")))}p.value=o.otherSlackUserId||null,h.value=o.communityName||l.currentCommunityName||"",b.value=o.slackTeamId||"",y.value=o.scale?Number(o.scale):3;var d,g,v=i.isAuthenticated&&(null===(r=i.user)||void 0===r?void 0:r.id);return v&&!s.value&&null!==(n=i.user)&&void 0!==n&&n.id&&(s.value=String(i.user.id),console.log("[OrgChartPage] Authenticated user without Slack ID, using user ID as fallback:",s.value)),console.log("[OrgChartPage] Extracted query params:",{communityId:u.value,slackUserId:s.value,otherSlackUserId:p.value,secretId:x.value,hasQueryParams:Object.keys(o).length>0,queryParams:o,isFullyAuthenticated:v}),console.log("[OrgChartPage] Raw route.query:",JSON.stringify(t.query,null,2)),u.value?!(!v&&!s.value)||(U.value="Missing required parameters: slackUserId",console.error("[OrgChartPage] Missing required parameters (not authenticated):",{communityId:u.value,slackUserId:s.value,secretId:x.value,queryParams:o,userSlackId:null===(g=i.user)||void 0===g?void 0:g.slackId,currentCommunityId:l.currentCommunityId,hasValidatedSession:!!X.getCurrentValidation()}),w.value=!1,!1):(U.value="Missing required parameters: communityId",console.error("[OrgChartPage] Missing required parameters:",{communityId:u.value,slackUserId:s.value,secretId:x.value,queryParams:o,userSlackId:null===(d=i.user)||void 0===d?void 0:d.slackId,currentCommunityId:l.currentCommunityId,hasValidatedSession:!!X.getCurrentValidation(),isFullyAuthenticated:v}),w.value=!1,!1)}function me(){return ye.apply(this,arguments)}function ye(){return(ye=d(c().m(function e(){var a;return c().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,G.create({header:"Session Expired",message:"For security purposes, your session has expired after 60 seconds. Would you like to sign in to continue, or go back to Slack to create a new session?",buttons:[{text:"Go Back to Slack",role:"cancel",handler:function(){window.history.back()}},{text:"Sign In",handler:function(){n.push("/login")}}]});case 1:return a=e.v,e.n=2,a.present();case 2:return e.a(2)}},e)}))).apply(this,arguments)}function ke(){return we.apply(this,arguments)}function we(){return we=d(c().m(function e(){var a,t,r,n,o,l,d,g,h,v,f,b,m=arguments;return c().w(function(e){for(;;)switch(e.p=e.n){case 0:if(t=!(m.length>0&&void 0!==m[0])||m[0],be()){e.n=1;break}return e.a(2);case 1:if(w.value=!0,U.value=null,(r=i.isAuthenticated&&(null===(a=i.user)||void 0===a?void 0:a.id))||!X.isSlackLinkUser()){e.n=3;break}if(!X.isSessionExpired()){e.n=3;break}return w.value=!1,e.n=2,me();case 2:return e.a(2);case 3:return e.p=3,console.log("[OrgChartPage] Creating Firebase document for keyDocRefId..."),e.n=4,ne.createSecretCode(u.value,s.value);case 4:return n=e.v,console.log("[OrgChartPage] Created keyDocRefId:",n),o=x.value||"",l="",r?(console.log("[OrgChartPage] User is fully authenticated, not sending secretId"),l=""):o?X.isSecretIdValidated(o)?(console.log("[OrgChartPage] SecretId already validated for this session, not sending in request"),l=""):(console.log("[OrgChartPage] Using secretId from Slack URL (s parameter):",o),l=o):X.hasValidatedSession()?(console.log("[OrgChartPage] No secretId in URL but session is validated, not sending secretId"),l=""):(console.log("[OrgChartPage] No secretId in URL (direct access, not from Slack)"),l=""),d={communityId:u.value,slackUserId:s.value,otherSlackUserId:p.value,keyDocRefId:n,searchStrings:[],isInitialPageLoad:t,s:l},console.log("[OrgChartPage] Making API call with:",d),console.log("[OrgChartPage] Full API request body:",JSON.stringify(d,null,2)),e.n=5,V.getOrgDataForCommunity(u.value,s.value,p.value,n,[],t,l);case 5:return g=e.v,console.log("[OrgChartPage] API response received:",g),e.n=6,Ze(g);case 6:Ce(g),e.n=10;break;case 7:if(e.p=7,b=e.v,console.error("[OrgChartPage] Failed to load org chart:",b),f=b.message||(null===(h=b.response)||void 0===h||null===(h=h.data)||void 0===h?void 0:h.message)||"",!(401===(b.status||(null===(v=b.response)||void 0===v?void 0:v.status))||f.toLowerCase().includes("expired")||f.toLowerCase().includes("invalid")||f.toLowerCase().includes("secret"))||!X.isSlackLinkUser()){e.n=9;break}return w.value=!1,e.n=8,me();case 8:e.n=10;break;case 9:U.value=f||"Failed to load org chart. Authentication may have expired.",w.value=!1;case 10:return e.a(2)}},e,null,[[3,7]])})),we.apply(this,arguments)}function Ce(e){var t,n,o,i,l,c;console.log("[OrgChartPage] Received org chart response:",e),console.log("[OrgChartPage] Root node:",e.dataSource),console.log("[OrgChartPage] Root node children:",(null===(t=e.dataSource)||void 0===t||null===(t=t.children)||void 0===t?void 0:t.length)||0),_.value=e.users||[],R.value=e.slackIdsInChain||[],re.value={showTitle:null===(n=e.showTitle)||void 0===n||n,showLocation:null===(o=e.showLocation)||void 0===o||o,showRole:null===(i=e.showRole)||void 0===i||i,showDepartment:null===(l=e.showDepartment)||void 0===l||l,showTeam:null===(c=e.showTeam)||void 0===c||c},p.value?(T.value=function(e,t){function n(e){return r(r({},e),{},{children:e.children?e.children.map(n):void 0,originalChildren:e.originalChildren?e.originalChildren.map(n):void 0})}var o=n(e);function i(e,t){if(e.slackId===t)return e;if(e.children){var r,n=a(e.children);try{for(n.s();!(r=n.n()).done;){var o=i(r.value,t);if(o)return o}}catch(l){n.e(l)}finally{n.f()}}return null}var l=i(o,t);if(!l)return console.warn("[OrgChartPage] Target user not found in tree, returning original structure"),o;function c(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(e.slackId===t)return r;if(e.children){var n,o=a(e.children);try{for(o.s();!(n=o.n()).done;){var i=c(n.value,t,e);if(null!==i)return i}}catch(l){o.e(l)}finally{o.f()}}return null}var u=c(o,t);if(!u)return console.log("[OrgChartPage] Target user is root, showing all direct reports"),l.expandedChildrenSlackIds&&delete l.expandedChildrenSlackIds,l.originalChildren&&l.originalChildren.length>0&&(l.children=l.originalChildren.map(n)),o;u.expandedChildrenSlackIds&&(console.log("[OrgChartPage] Clearing expandedChildrenSlackIds on parent to show all siblings"),delete u.expandedChildrenSlackIds);u.originalChildren&&u.originalChildren.length>0&&(u.children=u.originalChildren.map(n),console.log("[OrgChartPage] Restored",u.children.length,"siblings (teammates) for",u.name));l.expandedChildrenSlackIds&&delete l.expandedChildrenSlackIds;l.originalChildren&&l.originalChildren.length>0&&(l.children=l.originalChildren.map(n),console.log("[OrgChartPage] Restored",l.children.length,"direct reports for",l.name));return o}(e.dataSource,p.value),console.log("[OrgChartPage] Restructured tree for user:",p.value)):T.value=e.dataSource,w.value=!1,console.log("[OrgChartPage] Org chart data set, loading complete"),setTimeout(function(){p.value?(Oe(p.value),ve.value=p.value):Ie()},200)}function Ie(){fe.value&&fe.value.centerOnRoot()}function Oe(e){setTimeout(function(){var a=document.querySelector('[data-slack-id="'.concat(e,'"]'));a&&fe.value?(fe.value.centerOnNode(a),console.log("[OrgChartPage] Centered on user:",e)):(console.warn("[OrgChartPage] User node not found, centering on root"),Ie())},300)}function Se(){de.value&&clearTimeout(de.value),de.value=window.setTimeout(function(){ue.value.length>=3?function(){je.apply(this,arguments)}():se.value=[]},200)}function Pe(){ue.value="",se.value=[]}function je(){return(je=d(c().m(function e(){var t,r,n,o,i,l,u,s;return c().w(function(e){for(;;)switch(e.p=e.n){case 0:if(!((t=ue.value.trim()).length<3)){e.n=1;break}return se.value=[],e.a(2);case 1:r=t.split(" ").filter(function(e){return e.length>0}),n=[],o=a(r),e.p=2,o.s();case 3:if((i=o.n()).done){e.n=6;break}return l=i.value,e.n=4,Ue(l.toLowerCase());case 4:u=e.v,n=0===n.length?u:_e(n,u);case 5:e.n=3;break;case 6:e.n=8;break;case 7:e.p=7,s=e.v,o.e(s);case 8:return e.p=8,o.f(),e.f(8);case 9:se.value=n.sort(function(e,a){return a.matchedOn.length-e.matchedOn.length});case 10:return e.a(2)}},e,null,[[2,7,8,9]])}))).apply(this,arguments)}function Ue(e){return Te.apply(this,arguments)}function Te(){return(Te=d(c().m(function e(t){var r,n,o,i,l,u,s,d,p,g,h,v;return c().w(function(e){for(;;)if(0===e.n){r=[],n=a(_.value);try{for(n.s();!(o=n.n()).done;)h=o.value,v=[],(null!==(i=h.name)&&void 0!==i&&i.toLowerCase().includes(t)||null!==(l=h.fname)&&void 0!==l&&l.toLowerCase().includes(t)||null!==(u=h.lname)&&void 0!==u&&u.toLowerCase().includes(t))&&v.push("name"),null!==(s=h.department)&&void 0!==s&&s.toLowerCase().includes(t)&&v.push("department"),null!==(d=h.team)&&void 0!==d&&d.toLowerCase().includes(t)&&v.push("team"),null!==(p=h.role)&&void 0!==p&&p.toLowerCase().includes(t)&&v.push("role"),(null===(g=h.email)||void 0===g?void 0:g.toLowerCase())===t&&v.push("email"),v.length>0&&r.push({user:h,matchedOn:v})}catch(c){n.e(c)}finally{n.f()}return e.a(2,r)}},e)}))).apply(this,arguments)}function _e(e,t){var n,i=new Map,l=a(e);try{for(l.s();!(n=l.n()).done;){var c=n.value;i.set(c.user.id,r({},c))}}catch(v){l.e(v)}finally{l.f()}var u,s=[],d=a(t);try{for(d.s();!(u=d.n()).done;){var p=u.value,g=i.get(p.user.id);if(g){var h=o(new Set([].concat(o(g.matchedOn),o(p.matchedOn))));s.push({user:p.user,matchedOn:h})}}}catch(v){d.e(v)}finally{d.f()}return s}function Ae(e){var a=_.value.find(function(a){return a.slackId===e.slackId||a.id===e.id});a&&(ge.value=a,he.value={x:window.innerWidth/2,y:window.innerHeight/2},pe.value=!0)}function ze(e){}function $e(){pe.value=!1,ge.value=null}function Qe(){ke(!0)}function Ze(e){return Ke.apply(this,arguments)}function Ke(){return(Ke=d(c().m(function e(t){var r,n,o,i,l;return c().w(function(e){for(;;)switch(e.n){case 0:l=function(e){if(e.slackId&&r.has(e.slackId)&&!e.profilePicture&&(e.profilePicture=r.get(e.slackId)),e.children){var t,n=a(e.children);try{for(n.s();!(t=n.n()).done;){var o=t.value;l(o)}}catch(i){n.e(i)}finally{n.f()}}},r=new Map,n=a(t.users||[]);try{for(n.s();!(o=n.n()).done;)(i=o.value).profilePicture&&i.slackId&&r.set(i.slackId,i.profilePicture)}catch(c){n.e(c)}finally{n.f()}l(t.dataSource);case 1:return e.a(2)}},e)}))).apply(this,arguments)}return C(d(c().m(function e(){var a,r,n,o;return c().w(function(e){for(;;)switch(e.n){case 0:if(i.isAuthenticated){e.n=3;break}console.log("[OrgChartPage] Waiting for authentication..."),o=0;case 1:if(i.isAuthenticated||!(o<20)){e.n=3;break}return e.n=2,new Promise(function(e){return setTimeout(e,100)});case 2:o++,e.n=1;break;case 3:console.log("[OrgChartPage] Route query params:",t.query),console.log("[OrgChartPage] Auth state:",{isAuthenticated:i.isAuthenticated,userId:null===(a=i.user)||void 0===a?void 0:a.id,slackId:null===(r=i.user)||void 0===r?void 0:r.slackId,slackUserId:null===(n=i.user)||void 0===n?void 0:n.slackUserId,communityId:l.currentCommunityId}),ke(!0);case 4:return e.a(2)}},e)}))),v(function(){return t.query},function(){"/tabs/org-chart"===t.path&&ke(!1)},{deep:!0}),function(e,a){return k(),M(P(Y),null,{default:D(function(){return[S(P(J),null,{default:D(function(){return[S(P(H),null,{default:D(function(){return[S(P(W),null,{default:D(function(){return[L(O(h.value||"Org Chart"),1)]}),_:1})]}),_:1})]}),_:1}),S(P(te),{fullscreen:!0,class:"org-chart-page-content"},{default:D(function(){return[m("div",Ne,[m("div",Le,[S(P(j),{icon:P(Q),class:"search-icon"},null,8,["icon"]),$(m("input",{"onUpdate:modelValue":a[0]||(a[0]=function(e){return ue.value=e}),onInput:Se,type:"text",class:"org-chart-search-input",placeholder:"Search by name, department, team or role"},null,544),[[Z,ue.value]]),ue.value?(k(),f("button",{key:0,onClick:Pe,class:"search-clear-button"},[S(P(j),{icon:P(N)},null,8,["icon"])])):I("",!0)]),se.value.length>0&&ue.value.length>=3?(k(),f("div",qe,[(k(!0),f(A,null,z(se.value,function(e){return k(),f("div",{key:e.user.id,class:"search-result-item",onClick:function(a){return o=e.user,n.replace({query:r(r({},t.query),{},{otherSlackUserId:o.slackId})}),ve.value=o.slackId,p.value=o.slackId,ue.value="",se.value=[],void Oe(o.slackId);var o}},[e.user.profilePicture?(k(),f("img",{key:0,src:e.user.profilePicture,alt:e.user.name,class:"search-result-avatar"},null,8,Ee)):(k(),f("div",Me,O(e.user.name.charAt(0).toUpperCase()),1)),m("div",De,[m("div",Ye,O(e.user.name),1),m("div",Xe,[e.user.department?(k(),f("span",Ve,O(e.user.department),1)):I("",!0),e.user.role?(k(),f("span",Ge,O(e.user.role),1)):I("",!0)])])],8,Fe)}),128))])):I("",!0)]),w.value?(k(),f("div",Be,[S(P(K)),a[4]||(a[4]=m("p",null,"Loading org chart...",-1))])):U.value?(k(),f("div",He,[S(P(j),{icon:P(ee),class:"error-icon"},null,8,["icon"]),a[6]||(a[6]=m("h3",null,"Authentication Expired",-1)),m("p",null,O(U.value),1),S(P(ae),{onClick:Qe},{default:D(function(){return o(a[5]||(a[5]=[L("Retry",-1)]))}),_:1})])):I("",!0),T.value?(k(),f("div",We,[S(oe,{ref_key:"chartContainerRef",ref:fe,scale:ie.value,"translate-x":le.value,"translate-y":ce.value,"onUpdate:scale":a[1]||(a[1]=function(e){return ie.value=e}),"onUpdate:translateX":a[2]||(a[2]=function(e){return le.value=e}),"onUpdate:translateY":a[3]||(a[3]=function(e){return ce.value=e})},{default:D(function(){return[S(xe,{datasource:T.value,"display-flags":re.value,"group-scale":y.value,"is-highlighted":ve.value===T.value.slackId,"highlighted-slack-id":ve.value,onNodeClick:Ae,onSelectNode:ze},null,8,["datasource","display-flags","group-scale","is-highlighted","highlighted-slack-id"])]}),_:1},8,["scale","translate-x","translate-y"])])):w.value||U.value?I("",!0):(k(),f("div",Je,o(a[7]||(a[7]=[m("p",null,"Org chart will appear here once data is loaded.",-1),m("p",{class:"org-chart-empty-note"},"Note: During testing, the API endpoint may not be available.",-1)])))),S(Re,{"is-open":pe.value,user:ge.value,position:he.value,onClose:$e},null,8,["is-open","user","position"])]}),_:1})]}),_:1})}}});e("default",w($e,[["__scopeId","data-v-b3a3fe87"]]))}}})}();
