!function(){function e(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var t,n,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.toStringTag||"@@toStringTag";function c(e,r,o,i){var c=r&&r.prototype instanceof s?r:s,d=Object.create(c.prototype);return a(d,"_invoke",function(e,a,r){var o,i,c,s=0,d=r||[],u=!1,p={p:0,n:0,v:t,a:v,f:v.bind(t,4),d:function(e,a){return o=e,i=0,c=t,p.n=a,l}};function v(e,a){for(i=e,c=a,n=0;!u&&s&&!r&&n<d.length;n++){var r,o=d[n],v=p.p,f=o[2];e>3?(r=f===a)&&(c=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=t):o[0]<=v&&((r=e<2&&v<o[1])?(i=0,p.v=a,p.n=o[1]):v<f&&(r=e<3||o[0]>a||a>f)&&(o[4]=e,o[5]=a,p.n=f,i=0))}if(r||e>1)return l;throw u=!0,a}return function(r,d,f){if(s>1)throw TypeError("Generator is already running");for(u&&1===d&&v(d,f),i=d,c=f;(n=i<2?t:c)||!u;){o||(i?i<3?(i>1&&(p.n=-1),v(i,c)):p.n=c:p.v=c);try{if(s=2,o){if(i||(r="next"),n=o[r]){if(!(n=n.call(o,c)))throw TypeError("iterator result is not an object");if(!n.done)return n;c=n.value,i<2&&(i=0)}else 1===i&&(n=o.return)&&n.call(o),i<2&&(c=TypeError("The iterator does not provide a '"+r+"' method"),i=1);o=t}else if((n=(u=p.n<0)?c:e.call(a,p))!==l)break}catch(n){o=t,i=1,c=n}finally{s=1}}return{value:n,done:u}}}(e,o,i),!0),d}var l={};function s(){}function d(){}function u(){}n=Object.getPrototypeOf;var p=[][o]?n(n([][o]())):(a(n={},o,function(){return this}),n),v=u.prototype=s.prototype=Object.create(p);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,u):(e.__proto__=u,a(e,i,"GeneratorFunction")),e.prototype=Object.create(v),e}return d.prototype=u,a(v,"constructor",u),a(u,"constructor",d),d.displayName="GeneratorFunction",a(u,i,"GeneratorFunction"),a(v),a(v,i,"Generator"),a(v,o,function(){return this}),a(v,"toString",function(){return"[object Generator]"}),(e=function(){return{w:c,m:f}})()}function a(e,t,n,r){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}a=function(e,t,n,r){function i(t,n){a(e,t,function(e){return this._invoke(t,n,e)})}t?o?o(e,t,{value:n,enumerable:!r,configurable:!r,writable:!r}):e[t]=n:(i("next",0),i("throw",1),i("return",2))},a(e,t,n,r)}function t(e,a,t,n,r,o,i){try{var c=e[o](i),l=c.value}catch(e){return void t(e)}c.done?a(l):Promise.resolve(l).then(n,r)}function n(e){return function(){var a=this,n=arguments;return new Promise(function(r,o){var i=e.apply(a,n);function c(e){t(i,r,o,c,l,"next",e)}function l(e){t(i,r,o,c,l,"throw",e)}c(void 0)})}}function r(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,a){if(e){if("string"==typeof e)return o(e,a);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?o(e,a):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,a){(null==a||a>e.length)&&(a=e.length);for(var t=0,n=Array(a);t<a;t++)n[t]=e[t];return n}System.register(["./index-legacy-D3_iwoP0.js","./ChatThread-legacy-CXmiF0B3.js","./group.service-legacy-CiCW_xct.js","./event.service-legacy-CMLG_2ZP.js"],function(a,t){"use strict";var o,i,c,l,s,d,u,p,v,f,g,m,b,h,x,y,k,w,I,C,G,P,_,D,j,z,S,E,F,L,N,A,O,T,V,B,M,U,$,R,q,J,W,Y,Z,H,K,Q,X;return{setters:[function(e){o=e.F,i=e.Y,c=e.ag,l=e.aa,s=e.ab,d=e.O,u=e.R,p=e.N,v=e.L,f=e.aN,g=e.a6,m=e.a8,b=e.W,h=e.aE,x=e.a0,y=e.v,k=e.r,w=e.a2,I=e.ah,C=e.I,G=e.X,P=e.J,_=e.af,D=e.aV,j=e.aW,z=e.aJ,S=e.aK,E=e.aS,F=e.aC,L=e.a5,N=e.aZ,A=e.aU,O=e.a1,T=e.G,V=e.M,B=e.a3,M=e.Z,U=e.aB,$=e.b2,R=e.b3,q=e.b4,J=e.ae,W=e.Q,Y=e.H},function(e){Z=e.u,H=e.c,K=e.C},function(e){Q=e.groupService},function(e){X=e.eventService}],execute:function(){var t=document.createElement("style");t.textContent=".member-list-container[data-v-6a84823d]{display:flex;flex-direction:column;gap:16px}.member-item[data-v-6a84823d]{display:flex;gap:12px;padding:12px;background:#f8fafc;border-radius:12px;cursor:pointer;transition:all .2s ease}.member-item[data-v-6a84823d]:hover{background:#f1f5f9;transform:translate(4px)}.member-avatar-wrapper[data-v-6a84823d]{flex-shrink:0}.member-avatar[data-v-6a84823d]{width:48px;height:48px;border-radius:50%;object-fit:cover;border:2px solid #e5e7eb}.member-avatar-placeholder[data-v-6a84823d]{width:48px;height:48px;border-radius:50%;background:linear-gradient(135deg,var(--color-primary) 0%,var(--color-secondary) 100%);display:flex;align-items:center;justify-content:center;border:2px solid #e5e7eb}.member-avatar-placeholder ion-icon[data-v-6a84823d]{font-size:24px;color:#fff}.member-info[data-v-6a84823d]{flex:1;min-width:0}.member-name[data-v-6a84823d]{font-size:16px;font-weight:600;color:#1a1a1a;margin:0 0 4px}.member-location[data-v-6a84823d]{font-size:13px;color:#64748b;margin:0 0 8px;display:flex;align-items:center;gap:4px}.member-location ion-icon[data-v-6a84823d]{font-size:14px}.shared-interests[data-v-6a84823d]{margin-top:8px}.shared-label[data-v-6a84823d]{font-size:12px;color:#94a3b8;margin:0 0 4px}.interests-tags[data-v-6a84823d]{display:flex;flex-wrap:wrap;gap:6px}.interest-tag[data-v-6a84823d]{padding:4px 10px;background:rgba(45,122,78,.1);color:var(--color-primary);border-radius:12px;font-size:12px;font-weight:500}.empty-members[data-v-6a84823d]{text-align:center;padding:32px 16px;color:#64748b}.group-details-sidebar[data-v-fccdc93c]{background:#fff;border-radius:16px;padding:24px;box-shadow:0 2px 8px rgba(0,0,0,.04);display:flex;flex-direction:column;gap:24px}.group-header-section[data-v-fccdc93c]{display:flex;flex-direction:column;align-items:center;gap:16px}.group-logo-large[data-v-fccdc93c]{width:120px;height:120px;border-radius:16px;overflow:hidden;background:#e5e7eb;flex-shrink:0}.group-logo-image[data-v-fccdc93c]{width:100%;height:100%;object-fit:cover}.group-logo-placeholder[data-v-fccdc93c]{width:100%;height:100%;background:linear-gradient(135deg,var(--color-primary) 0%,var(--color-secondary) 100%);display:flex;align-items:center;justify-content:center}.group-logo-placeholder ion-icon[data-v-fccdc93c]{font-size:48px;color:#fff}.group-title-section[data-v-fccdc93c]{width:100%;text-align:center}.group-title-row[data-v-fccdc93c]{display:flex;align-items:center;justify-content:center;gap:8px;margin-bottom:8px}.group-name[data-v-fccdc93c]{font-size:24px;font-weight:700;color:#1a1a1a;margin:0;flex:1}.group-actions-row[data-v-fccdc93c]{display:flex;align-items:center;gap:4px}.favorite-button[data-v-fccdc93c],.edit-button[data-v-fccdc93c]{--padding-start: 8px;--padding-end: 8px;margin:0}.favorite-button ion-icon[data-v-fccdc93c],.edit-button ion-icon[data-v-fccdc93c]{font-size:20px;color:#cbd5e1}.favorite-button .favorite-active[data-v-fccdc93c]{color:var(--color-primary)}.private-indicator[data-v-fccdc93c]{display:flex;align-items:center;justify-content:center;gap:4px;font-size:12px;color:#64748b}.private-indicator ion-icon[data-v-fccdc93c]{font-size:16px}.leader-section[data-v-fccdc93c]{padding:16px;background:#f8fafc;border-radius:12px}.leader-info[data-v-fccdc93c]{display:flex;align-items:center;gap:12px}.leader-avatar[data-v-fccdc93c]{width:48px;height:48px;border-radius:50%;object-fit:cover;flex-shrink:0}.leader-avatar-placeholder[data-v-fccdc93c]{width:48px;height:48px;border-radius:50%;background:linear-gradient(135deg,var(--color-primary) 0%,var(--color-secondary) 100%);display:flex;align-items:center;justify-content:center;flex-shrink:0}.leader-avatar-placeholder ion-icon[data-v-fccdc93c]{font-size:24px;color:#fff}.leader-details[data-v-fccdc93c]{flex:1;min-width:0}.leader-name[data-v-fccdc93c]{font-size:16px;font-weight:600;color:#1a1a1a;margin:0 0 4px}.leader-label[data-v-fccdc93c]{font-size:13px;color:#64748b;margin:0}.member-count-section[data-v-fccdc93c]{display:flex;flex-direction:column;gap:12px}.member-count-header h3[data-v-fccdc93c]{font-size:18px;font-weight:700;color:#1a1a1a;margin:0}.member-avatars-preview[data-v-fccdc93c]{display:flex;align-items:center;gap:-8px}.member-avatar-preview[data-v-fccdc93c]{width:32px;height:32px;border-radius:50%;object-fit:cover;border:2px solid #ffffff;margin-left:-8px;position:relative}.member-avatar-preview[data-v-fccdc93c]:first-child{margin-left:0}.extra-members-preview[data-v-fccdc93c]{width:32px;height:32px;border-radius:50%;background:#f1f5f9;border:2px solid #ffffff;display:flex;align-items:center;justify-content:center;font-size:11px;font-weight:600;color:#64748b;margin-left:-8px;position:relative}.about-section[data-v-fccdc93c],.tags-section[data-v-fccdc93c]{display:flex;flex-direction:column;gap:8px}.section-title[data-v-fccdc93c]{font-size:16px;font-weight:700;color:#1a1a1a;margin:0}.about-text[data-v-fccdc93c]{font-size:14px;color:#64748b;line-height:1.6;margin:0}.tags-list[data-v-fccdc93c]{display:flex;flex-wrap:wrap;gap:8px}.tag-pill[data-v-fccdc93c]{padding:6px 12px;background:rgba(45,122,78,.1);color:var(--color-primary);border-radius:16px;font-size:13px;font-weight:500}.actions-section[data-v-fccdc93c]{display:flex;flex-direction:column;gap:8px}.leave-button[data-v-fccdc93c]{--color: #ef4444;font-weight:600;text-transform:none}.share-button[data-v-fccdc93c]{--background: var(--color-primary);--color: #ffffff;font-weight:600;text-transform:none}.member-search-section[data-v-fccdc93c]{display:flex;flex-direction:column;gap:8px}.member-search[data-v-fccdc93c]{--background: #f8fafc;--border-radius: 12px;--box-shadow: none;--placeholder-color: #94a3b8;--icon-color: #64748b;padding:0}.search-actions[data-v-fccdc93c]{display:flex;gap:8px}.filter-button[data-v-fccdc93c],.location-button[data-v-fccdc93c]{--color: var(--color-primary);--padding-start: 8px;--padding-end: 8px;margin:0}.members-list-section[data-v-fccdc93c]{max-height:600px;overflow-y:auto}@media (max-width: 767px){.group-details-sidebar[data-v-fccdc93c]{padding:16px}.group-logo-large[data-v-fccdc93c]{width:100px;height:100px}}.group-detail-content[data-v-404eb475]{--background: #f8fafc}.loading-container[data-v-404eb475],.error-state[data-v-404eb475]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:64px 16px;color:#64748b}.group-detail-container[data-v-404eb475]{min-height:100%}.mobile-layout[data-v-404eb475]{display:block}@media (min-width: 768px){.mobile-layout[data-v-404eb475]{display:none}}.group-header-mobile[data-v-404eb475]{background:#fff;padding:12px 16px;display:flex;align-items:center;gap:12px;box-shadow:0 2px 8px rgba(0,0,0,.04);border-bottom:1px solid #e5e7eb}.back-button[data-v-404eb475]{--padding-start: 8px;--padding-end: 8px;margin:0}.back-button ion-icon[data-v-404eb475]{font-size:24px;color:#1a1a1a}.group-name-mobile[data-v-404eb475]{flex:1;font-size:18px;font-weight:600;color:#1a1a1a;margin:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.more-button[data-v-404eb475]{--padding-start: 8px;--padding-end: 8px;margin:0}.more-button ion-icon[data-v-404eb475]{font-size:20px;color:#1a1a1a}.group-image-section[data-v-404eb475]{width:100%;height:200px;overflow:hidden;background:#e5e7eb}.group-header-image[data-v-404eb475]{width:100%;height:100%;object-fit:cover}.group-header-placeholder[data-v-404eb475]{width:100%;height:100%;background:linear-gradient(135deg,var(--color-primary) 0%,var(--color-secondary) 100%);display:flex;align-items:center;justify-content:center}.group-header-placeholder ion-icon[data-v-404eb475]{font-size:64px;color:#fff}.detail-tabs[data-v-404eb475]{background:#fff;padding:8px;border-bottom:1px solid #e5e7eb}.tab-content[data-v-404eb475]{padding:16px}.feed-tab[data-v-404eb475],.events-tab[data-v-404eb475],.details-tab[data-v-404eb475]{min-height:400px}.no-conversation[data-v-404eb475],.no-events[data-v-404eb475]{text-align:center;padding:64px 16px;color:#64748b}.desktop-layout[data-v-404eb475]{display:none}@media (min-width: 768px){.desktop-layout[data-v-404eb475]{display:block}}.desktop-content[data-v-404eb475]{display:flex;max-width:1400px;margin:0 auto;padding:24px;gap:24px}.sidebar[data-v-404eb475]{width:320px;flex-shrink:0}.main-content[data-v-404eb475]{flex:1;background:#fff;border-radius:16px;box-shadow:0 2px 8px rgba(0,0,0,.04);overflow:hidden}.detail-tabs-desktop[data-v-404eb475]{background:#fff;padding:0 16px;border-bottom:1px solid #e5e7eb}.tab-content-desktop[data-v-404eb475]{padding:24px;min-height:600px}.details-content[data-v-404eb475]{padding:24px}.details-content h2[data-v-404eb475]{font-size:24px;font-weight:700;color:#1a1a1a;margin:0 0 16px}.details-content p[data-v-404eb475]{font-size:16px;color:#64748b;line-height:1.6}\n",document.head.appendChild(t);var ee={class:"member-list-container"},ae=["onClick"],te={class:"member-avatar-wrapper"},ne=["src","alt"],re={key:1,class:"member-avatar-placeholder"},oe={class:"member-info"},ie={class:"member-name"},ce={key:0,class:"member-location"},le={key:1,class:"shared-interests"},se={class:"interests-tags"},de={key:0,class:"empty-members"},ue=x(o({__name:"MemberList",props:{members:{},currentUserId:{}},emits:["member-click"],setup:function(e){return function(a,t){return u(),i("div",ee,[(u(!0),i(l,null,s(e.members,function(e){return u(),i("div",{key:e.id,class:"member-item",onClick:function(t){return a.$emit("member-click",e)}},[d("div",te,[e.profilePicture?(u(),i("img",{key:0,src:e.profilePicture,alt:e.fullName,class:"member-avatar"},null,8,ne)):(u(),i("div",re,[p(v(g),{icon:v(f)},null,8,["icon"])]))]),d("div",oe,[d("h3",ie,m(e.fullName||"Unknown"),1),e.currentLocation?(u(),i("p",ce,[p(v(g),{icon:v(h)},null,8,["icon"]),b(" "+m(e.currentLocation),1)])):c("",!0),e.commonInterests&&e.commonInterests.length>0?(u(),i("div",le,[t[0]||(t[0]=d("p",{class:"shared-label"},"You share:",-1)),d("div",se,[(u(!0),i(l,null,s(e.commonInterests,function(e){return u(),i("span",{key:e,class:"interest-tag"},m(e),1)}),128))])])):c("",!0)])],8,ae)}),128)),0===e.members.length?(u(),i("div",de,r(t[1]||(t[1]=[d("p",null,"No members found",-1)])))):c("",!0)])}}}),[["__scopeId","data-v-6a84823d"]]),pe={class:"group-details-sidebar"},ve={class:"group-header-section"},fe={class:"group-logo-large"},ge=["src","alt"],me={key:1,class:"group-logo-placeholder"},be={class:"group-title-section"},he={class:"group-title-row"},xe={class:"group-name"},ye={class:"group-actions-row"},ke={key:0,class:"private-indicator"},we={key:0,class:"leader-section"},Ie={class:"leader-info"},Ce=["src","alt"],Ge={key:1,class:"leader-avatar-placeholder"},Pe={class:"leader-details"},_e={class:"leader-name"},De={class:"member-count-section"},je={class:"member-count-header"},ze={key:0,class:"member-avatars-preview"},Se=["src","alt"],Ee={key:0,class:"extra-members-preview"},Fe={key:1,class:"about-section"},Le={class:"about-text"},Ne={key:2,class:"tags-section"},Ae={class:"tags-list"},Oe={class:"actions-section"},Te={class:"member-search-section"},Ve={class:"search-actions"},Be={class:"members-list-section"},Me=x(o({__name:"GroupDetailsSidebar",props:{group:{},members:{default:function(){return[]}}},emits:["share","leave"],setup:function(e,a){a.emit;var t=e,n=y(),r=k(""),o=w(function(){var e;return null===(e=n.user)||void 0===e?void 0:e.id}),x=w(function(){return!0===t.group.userFollows}),O=w(function(){return!0===t.group.isAdmin||t.group.leaderId===o.value}),T=w(function(){if(!r.value.trim())return t.members||t.group.users||[];var e=r.value.toLowerCase();return(t.members||t.group.users||[]).filter(function(a){var t,n,r,o=(null===(t=a.fullName)||void 0===t?void 0:t.toLowerCase())||"",i=(null===(n=a.currentLocation)||void 0===n?void 0:n.toLowerCase())||"",c=(null===(r=a.interests)||void 0===r?void 0:r.map(function(e){var a;return(null===(a=e.name)||void 0===a?void 0:a.toLowerCase())||""}).join(" "))||"";return o.includes(e)||i.includes(e)||c.includes(e)})});function V(){return(t.group.users||[]).slice(0,5)}function B(){var e=t.group.users||[];return Math.max(0,e.length-5)}function M(){t.group.isFavorite=!t.group.isFavorite}function U(){console.log("Edit group:",t.group.id)}return function(a,t){return u(),i("div",pe,[d("div",ve,[d("div",fe,[e.group.logo||e.group.logoSmall?(u(),i("img",{key:0,src:e.group.logo||e.group.logoSmall,alt:e.group.name,class:"group-logo-image"},null,8,ge)):(u(),i("div",me,[p(v(g),{icon:v(I)},null,8,["icon"])]))]),d("div",be,[d("div",he,[d("h1",xe,m(e.group.name),1),d("div",ye,[p(v(G),{fill:"clear",class:"favorite-button",onClick:M},{default:P(function(){return[p(v(g),{icon:e.group.isFavorite?v(D):v(j),class:_({"favorite-active":e.group.isFavorite})},null,8,["icon","class"])]}),_:1}),O.value?(u(),C(v(G),{key:0,fill:"clear",class:"edit-button",onClick:U},{default:P(function(){return[p(v(g),{icon:v(z)},null,8,["icon"])]}),_:1})):c("",!0)])]),e.group.isPrivate?(u(),i("div",ke,[p(v(g),{icon:v(S)},null,8,["icon"]),t[3]||(t[3]=d("span",null,"Private Group",-1))])):c("",!0)])]),e.group.leader?(u(),i("div",we,[d("div",Ie,[e.group.leader.profilePicture?(u(),i("img",{key:0,src:e.group.leader.profilePicture,alt:e.group.leader.fullName,class:"leader-avatar"},null,8,Ce)):(u(),i("div",Ge,[p(v(g),{icon:v(f)},null,8,["icon"])])),d("div",Pe,[d("h3",_e,m(e.group.leader.fullName),1),t[4]||(t[4]=d("p",{class:"leader-label"},"Group Leader",-1))])])])):c("",!0),d("div",De,[d("div",je,[d("h3",null,m((e.group.memberCount||0)+1)+" Members",1)]),e.group.users&&e.group.users.length>0?(u(),i("div",ze,[(u(!0),i(l,null,s(V(),function(e,a){return u(),i("img",{key:e.id,src:e.profilePicture||"/assets/images/default-pro-pic.svg",alt:e.fullName,class:"member-avatar-preview",style:A({zIndex:V().length-a})},null,12,Se)}),128)),B()>0?(u(),i("span",Ee," +"+m(B()),1)):c("",!0)])):c("",!0)]),e.group.bio?(u(),i("div",Fe,[t[5]||(t[5]=d("h3",{class:"section-title"},"About",-1)),d("p",Le,m(e.group.bio),1)])):c("",!0),e.group.tags&&e.group.tags.length>0?(u(),i("div",Ne,[t[6]||(t[6]=d("h3",{class:"section-title"},"Tags",-1)),d("div",Ae,[(u(!0),i(l,null,s(e.group.tags,function(e){return u(),i("span",{key:e,class:"tag-pill"},m(e),1)}),128))])])):c("",!0),d("div",Oe,[x.value?(u(),C(v(G),{key:0,fill:"clear",class:"leave-button",onClick:t[0]||(t[0]=function(e){return a.$emit("leave")})},{default:P(function(){return[p(v(g),{icon:v(E),slot:"start"},null,8,["icon"]),t[7]||(t[7]=b(" Leave Group ",-1))]}),_:1})):c("",!0),p(v(G),{fill:"solid",class:"share-button",onClick:t[1]||(t[1]=function(e){return a.$emit("share")})},{default:P(function(){return[p(v(g),{icon:v(F),slot:"start"},null,8,["icon"]),t[8]||(t[8]=b(" Share ",-1))]}),_:1})]),d("div",Te,[p(v(L),{modelValue:r.value,"onUpdate:modelValue":t[2]||(t[2]=function(e){return r.value=e}),placeholder:"Location, interest, etc",class:"member-search",debounce:300},null,8,["modelValue"]),d("div",Ve,[p(v(G),{fill:"clear",class:"filter-button"},{default:P(function(){return[p(v(g),{icon:v(N)},null,8,["icon"])]}),_:1}),p(v(G),{fill:"clear",class:"location-button"},{default:P(function(){return[p(v(g),{icon:v(h)},null,8,["icon"])]}),_:1})])]),d("div",Be,[p(ue,{members:T.value,"current-user-id":o.value},null,8,["members","current-user-id"])])])}}}),[["__scopeId","data-v-fccdc93c"]]),Ue={key:0,class:"loading-container"},$e={key:1,class:"group-detail-container"},Re={class:"mobile-layout"},qe={class:"group-header-mobile"},Je={class:"group-name-mobile"},We={class:"group-image-section"},Ye=["src","alt"],Ze={key:1,class:"group-header-placeholder"},He={class:"tab-content"},Ke={key:0,class:"feed-tab"},Qe={key:1,class:"no-conversation"},Xe={key:2,class:"no-conversation"},ea={key:1,class:"events-tab"},aa={class:"group-events"},ta={key:0,class:"no-events"},na={key:1,class:"events-list"},ra={key:2,class:"details-tab"},oa={class:"desktop-layout"},ia={class:"desktop-content"},ca={class:"sidebar"},la={class:"main-content"},sa={class:"tab-content-desktop"},da={key:0,class:"feed-tab"},ua={key:1,class:"no-conversation"},pa={key:2,class:"no-conversation"},va={key:1,class:"events-tab"},fa={class:"group-events"},ga={key:0,class:"no-events"},ma={key:1,class:"events-list"},ba={key:2,class:"details-tab"},ha={class:"details-content"},xa={key:2,class:"error-state"},ya=o({__name:"GroupDetailPage",setup:function(a){var t=Y(),o=B(),l=y(),s=O(),f=Z(),h=k(!0),x=k(null),w=k([]),_=k([]),D=k("feed"),j=k(null);function z(){return(z=n(e().m(function a(){var t,n,r,i,c,d,u,p,v,g,m,b,y,k,I,C;return e().w(function(e){for(;;)switch(e.p=e.n){case 0:if(t=o.params.id){e.n=1;break}return h.value=!1,e.a(2);case 1:return h.value=!0,e.p=2,e.n=3,Q.getGroup(t);case 3:if(!(n=e.v)){e.n=22;break}if(x.value=n,n.users&&(w.value=n.users),e.p=4,console.log("[GroupDetailPage] Loading conversation for group:",n.id),!n.convoId){e.n=12;break}return console.log("[GroupDetailPage] Group has convoId, loading directly:",n.convoId),e.n=5,H.getConversationById(n.convoId);case 5:if(!(i=e.v)){e.n=7;break}return e.n=6,H.getMessagesForConversation(i.conversationId);case 6:c=e.v,i.messages=c,f.conversations.set(i.conversationId,i),j.value=i;try{f.setActiveConversation(i.conversationId)}catch(a){console.warn("[GroupDetailPage] Error setting active conversation:",a),f.activeConversation=i}console.log("[GroupDetailPage] Conversation loaded with",c.length,"messages"),e.n=11;break;case 7:return console.log("[GroupDetailPage] Conversation not found by ID, trying parentId query..."),e.n=8,H.getFirebaseConversationsByGroupId(n.id,"groups");case 8:if(!((d=e.v).length>0)){e.n=10;break}return u=d[0],console.log("[GroupDetailPage] Found group conversation by parentId:",u.conversationId),e.n=9,H.getMessagesForConversation(u.conversationId);case 9:p=e.v,u.messages=p,f.conversations.set(u.conversationId,u),j.value=u;try{f.setActiveConversation(u.conversationId)}catch(a){console.warn("[GroupDetailPage] Error setting active conversation:",a),f.activeConversation=u}console.log("[GroupDetailPage] Conversation loaded with",p.length,"messages"),e.n=11;break;case 10:return console.log("[GroupDetailPage] No conversation found, trying to get or create..."),e.n=11,S(n);case 11:e.n=16;break;case 12:return console.log("[GroupDetailPage] No convoId, trying parentId query..."),e.n=13,H.getFirebaseConversationsByGroupId(n.id,"groups");case 13:if(!((v=e.v).length>0)){e.n=15;break}return g=v[0],console.log("[GroupDetailPage] Found group conversation by parentId:",g.conversationId),e.n=14,H.getMessagesForConversation(g.conversationId);case 14:m=e.v,g.messages=m,f.conversations.set(g.conversationId,g),j.value=g;try{f.setActiveConversation(g.conversationId)}catch(a){console.warn("[GroupDetailPage] Error setting active conversation:",a),f.activeConversation=g}console.log("[GroupDetailPage] Conversation loaded with",m.length,"messages"),e.n=16;break;case 15:return console.log("[GroupDetailPage] No conversation found, trying to get or create..."),e.n=16,S(n);case 16:e.n=18;break;case 17:e.p=17,k=e.v,console.error("[GroupDetailPage] Error loading conversation:",k);case 18:if(null===(r=l.user)||void 0===r||!r.id){e.n=22;break}return e.p=19,b=s.currentCommunityId||1,e.n=20,X.getEvents(b,l.user.id);case 20:y=e.v,_.value=y.filter(function(e){return e.groupId===n.id}),e.n=22;break;case 21:e.p=21,I=e.v,console.error("Error loading group events:",I);case 22:e.n=24;break;case 23:e.p=23,C=e.v,console.error("[GroupDetailPage] Error loading group:",C);case 24:return e.p=24,h.value=!1,e.f(24);case 25:return e.a(2)}},a,null,[[19,21],[4,17],[2,23,24,25]])}))).apply(this,arguments)}function S(e){return E.apply(this,arguments)}function E(){return(E=n(e().m(function a(t){var n,r,o,i,c,l,s;return e().w(function(e){for(;;)switch(e.p=e.n){case 0:return e.p=0,console.log("[GroupDetailPage] No conversation found, trying to get or create..."),e.n=1,Q.getOrCreateConvo(t.id);case 1:if(n=e.v,console.log("[GroupDetailPage] getOrCreateConvo result:",n),!n.conversationId){e.n=12;break}return e.n=2,new Promise(function(e){return setTimeout(e,500)});case 2:r=null,o=0;case 3:if(!(o<3)){e.n=7;break}return e.n=4,H.getFirebaseConversationsByGroupId(t.id,"groups");case 4:if(!((i=e.v).length>0)){e.n=5;break}return r=i[0],e.a(3,7);case 5:return console.log("[GroupDetailPage] Retry ".concat(o+1,"/3 loading conversation...")),e.n=6,new Promise(function(e){return setTimeout(e,1e3)});case 6:o++,e.n=3;break;case 7:if(!r){e.n=9;break}return e.n=8,H.getMessagesForConversation(r.conversationId);case 8:c=e.v,r.messages=c,f.conversations.set(r.conversationId,r),j.value=r;try{f.setActiveConversation(r.conversationId)}catch(a){console.warn("[GroupDetailPage] Error setting active conversation:",a),f.activeConversation=r}console.log("[GroupDetailPage] Created and loaded new conversation with",c.length,"messages"),e.n=11;break;case 9:return console.log("[GroupDetailPage] Trying to load by conversationId directly..."),e.n=10,H.getConversationById(n.conversationId);case 10:if(l=e.v){f.conversations.set(l.conversationId,l),j.value=l;try{f.setActiveConversation(l.conversationId)}catch(a){console.warn("[GroupDetailPage] Error setting active conversation:",a),f.activeConversation=l}console.log("[GroupDetailPage] Loaded conversation directly by ID")}else console.warn("[GroupDetailPage] Conversation not found after all attempts");case 11:e.n=13;break;case 12:console.warn("[GroupDetailPage] No conversationId in getOrCreateConvo result");case 13:e.n=15;break;case 14:e.p=14,s=e.v,console.error("[GroupDetailPage] Error creating/loading conversation:",s);case 15:return e.a(2)}},a,null,[[0,14]])}))).apply(this,arguments)}function F(){t.push("/tabs/groups")}function L(){return N.apply(this,arguments)}function N(){return(N=n(e().m(function a(){var t,n;return e().w(function(e){for(;;)switch(e.p=e.n){case 0:if(x.value){e.n=1;break}return e.a(2);case 1:return e.p=1,e.n=2,Q.shareGroup(x.value.id);case 2:t=e.v,console.log("Share URL:",t.shareUrl),e.n=4;break;case 3:e.p=3,n=e.v,console.error("Error sharing group:",n);case 4:return e.a(2)}},a,null,[[1,3]])}))).apply(this,arguments)}function A(){return ee.apply(this,arguments)}function ee(){return(ee=n(e().m(function a(){var n,r;return e().w(function(e){for(;;)switch(e.p=e.n){case 0:if(x.value&&null!==(n=l.user)&&void 0!==n&&n.id){e.n=1;break}return e.a(2);case 1:if(!confirm("Are you sure you want to leave this group?")){e.n=5;break}return e.p=2,e.n=3,Q.leaveGroup(l.user.id,x.value.id);case 3:t.push("/tabs/groups"),e.n=5;break;case 4:e.p=4,r=e.v,console.error("Error leaving group:",r);case 5:return e.a(2)}},a,null,[[2,4]])}))).apply(this,arguments)}return T(function(){!function(){z.apply(this,arguments)}()}),function(e,a){return u(),C(v(V),null,{default:P(function(){return[p(v(W),{fullscreen:!0,class:"group-detail-content"},{default:P(function(){return[h.value?(u(),i("div",Ue,[p(v(M)),a[2]||(a[2]=d("p",null,"Loading group...",-1))])):x.value?(u(),i("div",$e,[d("div",Re,[d("div",qe,[p(v(G),{fill:"clear",onClick:F,class:"back-button"},{default:P(function(){return[p(v(g),{icon:v(U)},null,8,["icon"])]}),_:1}),d("h1",Je,m(x.value.name),1),p(v(G),{fill:"clear",class:"more-button"},{default:P(function(){return[p(v(g),{icon:v($)},null,8,["icon"])]}),_:1})]),d("div",We,[x.value.logo||x.value.logoSmall?(u(),i("img",{key:0,src:x.value.logo||x.value.logoSmall,alt:x.value.name,class:"group-header-image"},null,8,Ye)):(u(),i("div",Ze,[p(v(g),{icon:v(I)},null,8,["icon"])]))]),p(v(R),{modelValue:D.value,"onUpdate:modelValue":a[0]||(a[0]=function(e){return D.value=e}),class:"detail-tabs"},{default:P(function(){return[p(v(q),{value:"feed"},{default:P(function(){return[p(v(J),null,{default:P(function(){return r(a[3]||(a[3]=[b("Feed",-1)]))}),_:1})]}),_:1}),p(v(q),{value:"events"},{default:P(function(){return[p(v(J),null,{default:P(function(){return r(a[4]||(a[4]=[b("Events",-1)]))}),_:1})]}),_:1}),p(v(q),{value:"details"},{default:P(function(){return[p(v(J),null,{default:P(function(){return r(a[5]||(a[5]=[b("Details",-1)]))}),_:1})]}),_:1})]}),_:1},8,["modelValue"]),d("div",He,["feed"===D.value?(u(),i("div",Ke,[j.value?(u(),C(K,{key:0,conversation:j.value,onBack:F},null,8,["conversation"])):x.value.convoId?(u(),i("div",Qe,[p(v(M)),a[6]||(a[6]=d("p",null,"Loading conversation...",-1))])):(u(),i("div",Xe,r(a[7]||(a[7]=[d("p",null,"No conversation available",-1)]))))])):c("",!0),"events"===D.value?(u(),i("div",ea,[d("div",aa,[0===_.value.length?(u(),i("p",ta," No events scheduled for this group ")):(u(),i("div",na))])])):c("",!0),"details"===D.value?(u(),i("div",ra,[p(Me,{group:x.value,members:w.value,onShare:L,onLeave:A},null,8,["group","members"])])):c("",!0)])]),d("div",oa,[d("div",ia,[d("div",ca,[p(Me,{group:x.value,members:w.value,onShare:L,onLeave:A},null,8,["group","members"])]),d("div",la,[p(v(R),{modelValue:D.value,"onUpdate:modelValue":a[1]||(a[1]=function(e){return D.value=e}),class:"detail-tabs-desktop"},{default:P(function(){return[p(v(q),{value:"feed"},{default:P(function(){return[p(v(J),null,{default:P(function(){return r(a[8]||(a[8]=[b("Feed",-1)]))}),_:1})]}),_:1}),p(v(q),{value:"events"},{default:P(function(){return[p(v(J),null,{default:P(function(){return r(a[9]||(a[9]=[b("Events",-1)]))}),_:1})]}),_:1}),p(v(q),{value:"details"},{default:P(function(){return[p(v(J),null,{default:P(function(){return r(a[10]||(a[10]=[b("Details",-1)]))}),_:1})]}),_:1})]}),_:1},8,["modelValue"]),d("div",sa,["feed"===D.value?(u(),i("div",da,[j.value?(u(),C(K,{key:0,conversation:j.value,onBack:F},null,8,["conversation"])):x.value.convoId?(u(),i("div",ua,[p(v(M)),a[11]||(a[11]=d("p",null,"Loading conversation...",-1))])):(u(),i("div",pa,r(a[12]||(a[12]=[d("p",null,"No conversation available",-1)]))))])):c("",!0),"events"===D.value?(u(),i("div",va,[d("div",fa,[0===_.value.length?(u(),i("p",ga," No events scheduled for this group ")):(u(),i("div",ma))])])):c("",!0),"details"===D.value?(u(),i("div",ba,[d("div",ha,[a[13]||(a[13]=d("h2",null,"Group Information",-1)),d("p",null,m(x.value.bio),1)])])):c("",!0)])])])])])):(u(),i("div",xa,[a[15]||(a[15]=d("p",null,"Group not found",-1)),p(v(G),{onClick:F},{default:P(function(){return r(a[14]||(a[14]=[b("Go Back",-1)]))}),_:1})]))]}),_:1})]}),_:1})}}});a("default",x(ya,[["__scopeId","data-v-404eb475"]]))}}})}();
