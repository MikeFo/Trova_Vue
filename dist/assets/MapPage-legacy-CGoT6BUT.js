!function(){function e(e){if(null!=e){var t=e["function"==typeof Symbol&&Symbol.iterator||"@@iterator"],r=0;if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length))return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}}throw new TypeError(b(e)+" is not iterable")}function t(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var e,n,a="function"==typeof Symbol?Symbol:{},o=a.iterator||"@@iterator",i=a.toStringTag||"@@toStringTag";function s(t,a,o,i){var s=a&&a.prototype instanceof l?a:l,c=Object.create(s.prototype);return r(c,"_invoke",function(t,r,a){var o,i,s,l=0,c=a||[],f=!1,d={p:0,n:0,v:e,a:p,f:p.bind(e,4),d:function(t,r){return o=t,i=0,s=e,d.n=r,u}};function p(t,r){for(i=t,s=r,n=0;!f&&l&&!a&&n<c.length;n++){var a,o=c[n],p=d.p,h=o[2];t>3?(a=h===r)&&(s=o[(i=o[4])?5:(i=3,3)],o[4]=o[5]=e):o[0]<=p&&((a=t<2&&p<o[1])?(i=0,d.v=r,d.n=o[1]):p<h&&(a=t<3||o[0]>r||r>h)&&(o[4]=t,o[5]=r,d.n=h,i=0))}if(a||t>1)return u;throw f=!0,r}return function(a,c,h){if(l>1)throw TypeError("Generator is already running");for(f&&1===c&&p(c,h),i=c,s=h;(n=i<2?e:s)||!f;){o||(i?i<3?(i>1&&(d.n=-1),p(i,s)):d.n=s:d.v=s);try{if(l=2,o){if(i||(a="next"),n=o[a]){if(!(n=n.call(o,s)))throw TypeError("iterator result is not an object");if(!n.done)return n;s=n.value,i<2&&(i=0)}else 1===i&&(n=o.return)&&n.call(o),i<2&&(s=TypeError("The iterator does not provide a '"+a+"' method"),i=1);o=e}else if((n=(f=d.n<0)?s:t.call(r,d))!==u)break}catch(n){o=e,i=1,s=n}finally{l=1}}return{value:n,done:f}}}(t,o,i),!0),c}var u={};function l(){}function c(){}function f(){}n=Object.getPrototypeOf;var d=[][o]?n(n([][o]())):(r(n={},o,function(){return this}),n),p=f.prototype=l.prototype=Object.create(d);function h(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,f):(e.__proto__=f,r(e,i,"GeneratorFunction")),e.prototype=Object.create(p),e}return c.prototype=f,r(p,"constructor",f),r(f,"constructor",c),c.displayName="GeneratorFunction",r(f,i,"GeneratorFunction"),r(p),r(p,i,"Generator"),r(p,o,function(){return this}),r(p,"toString",function(){return"[object Generator]"}),(t=function(){return{w:s,m:h}})()}function r(e,t,n,a){var o=Object.defineProperty;try{o({},"",{})}catch(e){o=0}r=function(e,t,n,a){function i(t,n){r(e,t,function(e){return this._invoke(t,n,e)})}t?o?o(e,t,{value:n,enumerable:!a,configurable:!a,writable:!a}):e[t]=n:(i("next",0),i("throw",1),i("return",2))},r(e,t,n,a)}function n(e,t,r,n,a,o,i){try{var s=e[o](i),u=s.value}catch(e){return void r(e)}s.done?t(u):Promise.resolve(u).then(n,a)}function a(e){return function(){var t=this,r=arguments;return new Promise(function(a,o){var i=e.apply(t,r);function s(e){n(i,a,o,s,u,"next",e)}function u(e){n(i,a,o,s,u,"throw",e)}s(void 0)})}}function o(e){return function(e){if(Array.isArray(e))return h(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||p(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(e,t,r){return t=u(t),function(e,t){if(t&&("object"==b(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(e,s()?Reflect.construct(t,r||[],u(e).constructor):t.apply(e,r))}function s(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(s=function(){return!!e})()}function u(e){return u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},u(e)}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}function c(e,t){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},c(e,t)}function f(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=p(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return i=e.done,e},e:function(e){s=!0,o=e},f:function(){try{i||null==r.return||r.return()}finally{if(s)throw o}}}}function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o,i,s=[],u=!0,l=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=o.call(r)).done)&&(s.push(n.value),s.length!==t);u=!0);}catch(e){l=!0,a=e}finally{try{if(!u&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw a}}return s}}(e,t)||p(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){if(e){if("string"==typeof e)return h(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?h(e,t):void 0}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,y(n.key),n)}}function g(e,t,r){return t&&m(e.prototype,t),r&&m(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function y(e){var t=function(e,t){if("object"!=b(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=b(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==b(t)?t:t+""}function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}System.register(["./index-legacy-D3_iwoP0.js","./profile.service-legacy-D-F1sSvx.js","./useGooglePlaces-legacy-C2bnTXgd.js"],function(r,n){"use strict";var s,u,c,p,h,m,y,w,k,x,M,P,C,E,L,I,S,_,A,j,O,T,N,z,Z,q,U,B,D,R,F,G,V,W,$,H,X,K,J,Y,Q;return{setters:[function(e){s=e.F,u=e.v,c=e.a1,p=e.r,h=e.a2,m=e.a4,y=e.G,w=e.a_,k=e.o,x=e.I,M=e.J,P=e.L,C=e.M,E=e.a3,L=e.a$,I=e.$,S=e._,_=e.b0,A=e.H,j=e.N,O=e.O,T=e.Y,N=e.ag,z=e.a5,Z=e.a8,q=e.X,U=e.W,B=e.ab,D=e.aa,R=e.a6,F=e.aN,G=e.Z,V=e.Q,W=e.R,$=e.af,H=e.ap,X=e.b1,K=e.aE,J=e.a0},function(e){Y=e.profileService},function(e){Q=e.u}],execute:function(){var n=document.createElement("style");n.textContent='.map-content[data-v-93de8e1a]{--background: #f8fafc;height:100%;overflow:hidden}.map-layout[data-v-93de8e1a]{display:flex;height:100%;width:100%;padding:108px 24px 72px;box-sizing:border-box;gap:20px}.map-section[data-v-93de8e1a]{flex:1;display:flex;flex-direction:column;min-width:0;border-radius:12px;overflow:hidden;box-shadow:0 2px 8px rgba(0,0,0,.1);background:#fff}.map-title[data-v-93de8e1a]{margin:0;padding:16px 20px;font-size:24px;font-weight:600;color:#1a1a1a;border-bottom:1px solid #e2e8f0;flex-shrink:0}.map-container[data-v-93de8e1a]{width:100%;flex:1;min-height:0}.user-panel[data-v-93de8e1a]{width:400px;background:#fff;display:flex;flex-direction:column;border-radius:12px;box-shadow:0 2px 8px rgba(0,0,0,.1);overflow:hidden}.panel-header[data-v-93de8e1a]{padding:20px;border-bottom:1px solid #e2e8f0;background:#fff;flex-shrink:0}.panel-title[data-v-93de8e1a]{margin:0 0 16px;font-size:24px;font-weight:600;color:#1a1a1a}.search-wrapper[data-v-93de8e1a]{margin-bottom:12px}.panel-search[data-v-93de8e1a]{--background: #f1f5f9;--box-shadow: none;--border-radius: 8px;--placeholder-color: #64748b;padding:0}.results-count[data-v-93de8e1a]{font-size:14px;color:#64748b;margin-bottom:12px}.message-button[data-v-93de8e1a]{width:100%;--border-radius: 8px;font-weight:500;margin-top:8px}.user-list[data-v-93de8e1a]{flex:1;overflow-y:auto;padding:8px}.user-card[data-v-93de8e1a]{display:flex;gap:12px;padding:12px;margin-bottom:8px;border-radius:12px;border:1px solid #e2e8f0;background:#fff;cursor:pointer;transition:all .2s}.user-card[data-v-93de8e1a]:hover{border-color:#2d7a4e;box-shadow:0 2px 8px rgba(45,122,78,.1)}.user-card-selected[data-v-93de8e1a]{border-color:#2d7a4e;background:#f0fdf4}.user-card-highlighted[data-v-93de8e1a]{border-color:#fbbf24;background:#fef3c7;box-shadow:0 0 0 3px rgba(251,191,36,.3);animation:highlightPulse-93de8e1a .5s ease-in-out}@keyframes highlightPulse-93de8e1a{0%{box-shadow:0 0 rgba(251,191,36,.5)}50%{box-shadow:0 0 0 8px rgba(251,191,36,.2)}to{box-shadow:0 0 0 3px rgba(251,191,36,.3)}}.user-checkbox[data-v-93de8e1a]{display:flex;align-items:flex-start;padding-top:4px}.user-avatar[data-v-93de8e1a]{flex-shrink:0}.avatar-image[data-v-93de8e1a]{width:48px;height:48px;border-radius:50%;object-fit:cover}.avatar-placeholder[data-v-93de8e1a]{width:48px;height:48px;border-radius:50%;background:#e2e8f0;display:flex;align-items:center;justify-content:center}.avatar-placeholder ion-icon[data-v-93de8e1a]{font-size:24px;color:#94a3b8}.user-info[data-v-93de8e1a]{flex:1;min-width:0}.user-name[data-v-93de8e1a]{margin:0 0 4px;font-size:16px;font-weight:600;color:#1a1a1a}.user-location[data-v-93de8e1a]{margin:0 0 6px;font-size:13px;color:#64748b;display:flex;align-items:center;gap:4px}.user-bio[data-v-93de8e1a]{margin:0 0 8px;font-size:13px;color:#475569;line-height:1.4;display:-webkit-box;line-clamp:2;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}.user-interests[data-v-93de8e1a]{display:flex;flex-wrap:wrap;gap:4px}.interest-badge[data-v-93de8e1a]{background:#e2e8f0;border-radius:4px;padding:2px 8px;font-size:11px;color:#475569}.user-actions[data-v-93de8e1a]{display:flex;align-items:flex-start;flex-shrink:0}.view-profile-btn[data-v-93de8e1a]{--border-radius: 6px;--padding-start: 12px;--padding-end: 12px;font-size:12px;height:32px}.empty-state[data-v-93de8e1a]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px;color:#94a3b8}.empty-icon[data-v-93de8e1a]{font-size:48px;margin-bottom:16px}.loading-overlay[data-v-93de8e1a]{position:absolute;top:0;left:0;right:0;bottom:0;background:rgba(255,255,255,.9);display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:2000}.loading-overlay ion-spinner[data-v-93de8e1a]{width:40px;height:40px;--color: var(--ion-color-primary)}.loading-overlay p[data-v-93de8e1a]{margin-top:16px;font-size:16px;color:#64748b}@media (max-width: 1024px){.map-layout[data-v-93de8e1a]{flex-direction:column;padding:72px 16px 48px;gap:16px}.map-section[data-v-93de8e1a]{height:50vh}.user-panel[data-v-93de8e1a]{width:100%;height:50vh}}@media (max-width: 767px){.map-layout[data-v-93de8e1a]{padding:54px 12px 36px;gap:12px}.user-panel[data-v-93de8e1a]{width:100%}.panel-header[data-v-93de8e1a]{padding:16px}.panel-title[data-v-93de8e1a]{font-size:20px}}.gm-style .gm-marker img,.gm-style .gm-marker>div>img,.gm-style .gm-marker>div>div>img,.gm-style .gm-marker>div>div>div>img,.gm-style img[width="40"][height="40"],.gm-style img[style*="width: 40px"][style*="height: 40px"],.gm-style img[src*=firebase]:not([src*=tile]),.gm-style img[src*=s3]:not([src*=tile]),.gm-style img[src*=gravatar]:not([src*=tile]),.gm-style img[src*=slack]:not([src*=tile]),.gm-style img[src*=amazonaws]:not([src*=tile]),.gm-style img[src*=trova]:not([src*=tile]),.gm-style img[src*=github]:not([src*=tile]),.gm-style img[src^="data:image"],.gm-style div[style*="position: absolute"][style*=z-index]>img[width="40"],.gm-style div[style*="position: absolute"][style*=z-index]>img[height="40"]{border-radius:50%!important;overflow:hidden!important;object-fit:cover!important;clip-path:circle(50%)!important}\n',document.head.appendChild(n);var ee=Object.getOwnPropertyNames,te=Object.getOwnPropertySymbols,re=Object.prototype.hasOwnProperty;function ne(e,t){return function(r,n,a){return e(r,n,a)&&t(r,n,a)}}function ae(e){return function(t,r,n){if(!t||!r||"object"!==b(t)||"object"!==b(r))return e(t,r,n);var a=n.cache,o=a.get(t),i=a.get(r);if(o&&i)return o===r&&i===t;a.set(t,r),a.set(r,t);var s=e(t,r,n);return a.delete(t),a.delete(r),s}}function oe(e){return ee(e).concat(te(e))}var ie=Object.hasOwn||function(e,t){return re.call(e,t)};function se(e,t){return e===t||!e&&!t&&e!=e&&t!=t}var ue=Object.getOwnPropertyDescriptor,le=Object.keys;function ce(e,t,r){var n=e.length;if(t.length!==n)return!1;for(;n-- >0;)if(!r.equals(e[n],t[n],n,n,e,t,r))return!1;return!0}function fe(e,t){return se(e.getTime(),t.getTime())}function de(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function pe(e,t){return e===t}function he(e,t,r){var n=e.size;if(n!==t.size)return!1;if(!n)return!0;for(var a,o,i=new Array(n),s=e.entries(),u=0;(a=s.next())&&!a.done;){for(var l=t.entries(),c=!1,f=0;(o=l.next())&&!o.done;)if(i[f])f++;else{var d=a.value,p=o.value;if(r.equals(d[0],p[0],u,f,e,t,r)&&r.equals(d[1],p[1],d[0],p[0],e,t,r)){c=i[f]=!0;break}f++}if(!c)return!1;u++}return!0}var ve=se;function me(e,t,r){var n=le(e),a=n.length;if(le(t).length!==a)return!1;for(;a-- >0;)if(!Me(e,t,r,n[a]))return!1;return!0}function ge(e,t,r){var n,a,o,i=oe(e),s=i.length;if(oe(t).length!==s)return!1;for(;s-- >0;){if(!Me(e,t,r,n=i[s]))return!1;if(a=ue(e,n),o=ue(t,n),(a||o)&&(!a||!o||a.configurable!==o.configurable||a.enumerable!==o.enumerable||a.writable!==o.writable))return!1}return!0}function ye(e,t){return se(e.valueOf(),t.valueOf())}function be(e,t){return e.source===t.source&&e.flags===t.flags}function we(e,t,r){var n=e.size;if(n!==t.size)return!1;if(!n)return!0;for(var a,o,i=new Array(n),s=e.values();(a=s.next())&&!a.done;){for(var u=t.values(),l=!1,c=0;(o=u.next())&&!o.done;){if(!i[c]&&r.equals(a.value,o.value,a.value,o.value,e,t,r)){l=i[c]=!0;break}c++}if(!l)return!1}return!0}function ke(e,t){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}function xe(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function Me(e,t,r,n){return!("_owner"!==n&&"__o"!==n&&"__v"!==n||!e.$$typeof&&!t.$$typeof)||ie(t,n)&&r.equals(e[n],t[n],n,n,e,t,r)}var Pe=Array.isArray,Ce="undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView:null,Ee=Object.assign,Le=Object.prototype.toString.call.bind(Object.prototype.toString);function Ie(e){var t=e.areArraysEqual,r=e.areDatesEqual,n=e.areErrorsEqual,a=e.areFunctionsEqual,o=e.areMapsEqual,i=e.areNumbersEqual,s=e.areObjectsEqual,u=e.arePrimitiveWrappersEqual,l=e.areRegExpsEqual,c=e.areSetsEqual,f=e.areTypedArraysEqual,d=e.areUrlsEqual,p=e.unknownTagComparators;return function(e,h,v){if(e===h)return!0;if(null==e||null==h)return!1;var m=b(e);if(m!==b(h))return!1;if("object"!==m)return"number"===m?i(e,h,v):"function"===m&&a(e,h,v);var g=e.constructor;if(g!==h.constructor)return!1;if(g===Object)return s(e,h,v);if(Pe(e))return t(e,h,v);if(null!=Ce&&Ce(e))return f(e,h,v);if(g===Date)return r(e,h,v);if(g===RegExp)return l(e,h,v);if(g===Map)return o(e,h,v);if(g===Set)return c(e,h,v);var y,w=Le(e);if("[object Date]"===w)return r(e,h,v);if("[object RegExp]"===w)return l(e,h,v);if("[object Map]"===w)return o(e,h,v);if("[object Set]"===w)return c(e,h,v);if("[object Object]"===w)return"function"!=typeof e.then&&"function"!=typeof h.then&&s(e,h,v);if("[object URL]"===w)return d(e,h,v);if("[object Error]"===w)return n(e,h,v);if("[object Arguments]"===w)return s(e,h,v);if("[object Boolean]"===w||"[object Number]"===w||"[object String]"===w)return u(e,h,v);if(p){var k=p[w];if(!k){var x=null!=(y=e)?y[Symbol.toStringTag]:void 0;x&&(k=p[x])}if(k)return k(e,h,v)}return!1}}var Se=_e();function _e(e){void 0===e&&(e={});var t,r=e.circular,n=void 0!==r&&r,a=e.createInternalComparator,o=e.createState,i=e.strict,s=void 0!==i&&i,u=function(e){var t=e.circular,r=e.createCustomConfig,n=e.strict,a={areArraysEqual:n?ge:ce,areDatesEqual:fe,areErrorsEqual:de,areFunctionsEqual:pe,areMapsEqual:n?ne(he,ge):he,areNumbersEqual:ve,areObjectsEqual:n?ge:me,arePrimitiveWrappersEqual:ye,areRegExpsEqual:be,areSetsEqual:n?ne(we,ge):we,areTypedArraysEqual:n?ge:ke,areUrlsEqual:xe,unknownTagComparators:void 0};if(r&&(a=Ee({},a,r(a))),t){var o=ae(a.areArraysEqual),i=ae(a.areMapsEqual),s=ae(a.areObjectsEqual),u=ae(a.areSetsEqual);a=Ee({},a,{areArraysEqual:o,areMapsEqual:i,areObjectsEqual:s,areSetsEqual:u})}return a}(e),l=Ie(u);return function(e){var t=e.circular,r=e.comparator,n=e.createState,a=e.equals,o=e.strict;if(n)return function(e,i){var s=n(),u=s.cache,l=void 0===u?t?new WeakMap:void 0:u,c=s.meta;return r(e,i,{cache:l,equals:a,meta:c,strict:o})};if(t)return function(e,t){return r(e,t,{cache:new WeakMap,equals:a,meta:void 0,strict:o})};var i={cache:void 0,equals:a,meta:void 0,strict:o};return function(e,t){return r(e,t,i)}}({circular:n,comparator:l,createState:o,equals:a?a(l):(t=l,function(e,r,n,a,o,i,s){return t(e,r,s)}),strict:s})}_e({strict:!0}),_e({circular:!0}),_e({circular:!0,strict:!0}),_e({createInternalComparator:function(){return se}}),_e({strict:!0,createInternalComparator:function(){return se}}),_e({circular:!0,createInternalComparator:function(){return se}}),_e({circular:!0,createInternalComparator:function(){return se},strict:!0});var Ae=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array],je=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:64,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Float64Array,a=arguments.length>3?arguments[3]:void 0;if(v(this,e),isNaN(t)||t<0)throw new Error("Unpexpected numItems value: ".concat(t,"."));this.numItems=+t,this.nodeSize=Math.min(Math.max(+r,2),65535),this.ArrayType=n,this.IndexArrayType=t<65536?Uint16Array:Uint32Array;var o=Ae.indexOf(this.ArrayType),i=2*t*this.ArrayType.BYTES_PER_ELEMENT,s=t*this.IndexArrayType.BYTES_PER_ELEMENT,u=(8-s%8)%8;if(o<0)throw new Error("Unexpected typed array class: ".concat(n,"."));a&&a instanceof ArrayBuffer?(this.data=a,this.ids=new this.IndexArrayType(this.data,8,t),this.coords=new this.ArrayType(this.data,8+s+u,2*t),this._pos=2*t,this._finished=!0):(this.data=new ArrayBuffer(8+i+s+u),this.ids=new this.IndexArrayType(this.data,8,t),this.coords=new this.ArrayType(this.data,8+s+u,2*t),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+o]),new Uint16Array(this.data,2,1)[0]=r,new Uint32Array(this.data,4,1)[0]=t)}return g(e,[{key:"add",value:function(e,t){var r=this._pos>>1;return this.ids[r]=r,this.coords[this._pos++]=e,this.coords[this._pos++]=t,r}},{key:"finish",value:function(){var e=this._pos>>1;if(e!==this.numItems)throw new Error("Added ".concat(e," items when expected ").concat(this.numItems,"."));return Oe(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}},{key:"range",value:function(e,t,r,n){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");for(var a=this.ids,o=this.coords,i=this.nodeSize,s=[0,a.length-1,0],u=[];s.length;){var l=s.pop()||0,c=s.pop()||0,f=s.pop()||0;if(c-f<=i)for(var d=f;d<=c;d++){var p=o[2*d],h=o[2*d+1];p>=e&&p<=r&&h>=t&&h<=n&&u.push(a[d])}else{var v=f+c>>1,m=o[2*v],g=o[2*v+1];m>=e&&m<=r&&g>=t&&g<=n&&u.push(a[v]),(0===l?e<=m:t<=g)&&(s.push(f),s.push(v-1),s.push(1-l)),(0===l?r>=m:n>=g)&&(s.push(v+1),s.push(c),s.push(1-l))}}return u}},{key:"within",value:function(e,t,r){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");for(var n=this.ids,a=this.coords,o=this.nodeSize,i=[0,n.length-1,0],s=[],u=r*r;i.length;){var l=i.pop()||0,c=i.pop()||0,f=i.pop()||0;if(c-f<=o)for(var d=f;d<=c;d++)Ze(a[2*d],a[2*d+1],e,t)<=u&&s.push(n[d]);else{var p=f+c>>1,h=a[2*p],v=a[2*p+1];Ze(h,v,e,t)<=u&&s.push(n[p]),(0===l?e-r<=h:t-r<=v)&&(i.push(f),i.push(p-1),i.push(1-l)),(0===l?e+r>=h:t+r>=v)&&(i.push(p+1),i.push(c),i.push(1-l))}}return s}}],[{key:"from",value:function(t){if(!(t instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");var r=d(new Uint8Array(t,0,2),2),n=r[0],a=r[1];if(219!==n)throw new Error("Data does not appear to be in a KDBush format.");var o=a>>4;if(1!==o)throw new Error("Got v".concat(o," data when expected v").concat(1,"."));var i=Ae[15&a];if(!i)throw new Error("Unrecognized array type.");var s=d(new Uint16Array(t,2,1),1)[0];return new e(d(new Uint32Array(t,4,1),1)[0],s,i,t)}}])}();function Oe(e,t,r,n,a,o){if(!(a-n<=r)){var i=n+a>>1;Te(e,t,i,n,a,o),Oe(e,t,r,n,i-1,1-o),Oe(e,t,r,i+1,a,1-o)}}function Te(e,t,r,n,a,o){for(;a>n;){if(a-n>600){var i=a-n+1,s=r-n+1,u=Math.log(i),l=.5*Math.exp(2*u/3),c=.5*Math.sqrt(u*l*(i-l)/i)*(s-i/2<0?-1:1);Te(e,t,r,Math.max(n,Math.floor(r-s*l/i+c)),Math.min(a,Math.floor(r+(i-s)*l/i+c)),o)}var f=t[2*r+o],d=n,p=a;for(Ne(e,t,n,r),t[2*a+o]>f&&Ne(e,t,n,a);d<p;){for(Ne(e,t,d,p),d++,p--;t[2*d+o]<f;)d++;for(;t[2*p+o]>f;)p--}t[2*n+o]===f?Ne(e,t,n,p):Ne(e,t,++p,a),p<=r&&(n=p+1),r<=p&&(a=p-1)}}function Ne(e,t,r,n){ze(e,r,n),ze(t,2*r,2*n),ze(t,2*r+1,2*n+1)}function ze(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function Ze(e,t,r,n){var a=e-r,o=t-n;return a*a+o*o}var qe,Ue={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(e){return e}},Be=Math.fround||(qe=new Float32Array(1),function(e){return qe[0]=+e,qe[0]}),De=function(){return g(function e(t){v(this,e),this.options=Object.assign(Object.create(Ue),t),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]},[{key:"load",value:function(e){var t=this.options,r=t.log,n=t.minZoom,a=t.maxZoom;r&&console.time("total time");var o="prepare ".concat(e.length," points");r&&console.time(o),this.points=e;for(var i=[],s=0;s<e.length;s++){var u=e[s];if(u.geometry){var l=d(u.geometry.coordinates,2),c=l[0],f=l[1],p=Be(Ge(c)),h=Be(Ve(f));i.push(p,h,1/0,s,-1,1),this.options.reduce&&i.push(0)}}var v=this.trees[a+1]=this._createTree(i);r&&console.timeEnd(o);for(var m=a;m>=n;m--){var g=+Date.now();v=this.trees[m]=this._createTree(this._cluster(v,m)),r&&console.log("z%d: %d clusters in %dms",m,v.numItems,+Date.now()-g)}return r&&console.timeEnd("total time"),this}},{key:"getClusters",value:function(e,t){var r=((e[0]+180)%360+360)%360-180,n=Math.max(-90,Math.min(90,e[1])),a=180===e[2]?180:((e[2]+180)%360+360)%360-180,o=Math.max(-90,Math.min(90,e[3]));if(e[2]-e[0]>=360)r=-180,a=180;else if(r>a){var i=this.getClusters([r,n,180,o],t),s=this.getClusters([-180,n,a,o],t);return i.concat(s)}var u,l=this.trees[this._limitZoom(t)],c=l.range(Ge(r),Ve(o),Ge(a),Ve(n)),d=l.data,p=[],h=f(c);try{for(h.s();!(u=h.n()).done;){var v=u.value,m=this.stride*v;p.push(d[m+5]>1?Re(d,m,this.clusterProps):this.points[d[m+3]])}}catch(g){h.e(g)}finally{h.f()}return p}},{key:"getChildren",value:function(e){var t=this._getOriginId(e),r=this._getOriginZoom(e),n="No cluster with the specified id.",a=this.trees[r];if(!a)throw new Error(n);var o=a.data;if(t*this.stride>=o.length)throw new Error(n);var i,s=this.options.radius/(this.options.extent*Math.pow(2,r-1)),u=o[t*this.stride],l=o[t*this.stride+1],c=[],d=f(a.within(u,l,s));try{for(d.s();!(i=d.n()).done;){var p=i.value*this.stride;o[p+4]===e&&c.push(o[p+5]>1?Re(o,p,this.clusterProps):this.points[o[p+3]])}}catch(h){d.e(h)}finally{d.f()}if(0===c.length)throw new Error(n);return c}},{key:"getLeaves",value:function(e,t,r){t=t||10,r=r||0;var n=[];return this._appendLeaves(n,e,t,r,0),n}},{key:"getTile",value:function(e,t,r){var n=this.trees[this._limitZoom(e)],a=Math.pow(2,e),o=this.options,i=o.extent,s=o.radius/i,u=(r-s)/a,l=(r+1+s)/a,c={features:[]};return this._addTileFeatures(n.range((t-s)/a,u,(t+1+s)/a,l),n.data,t,r,a,c),0===t&&this._addTileFeatures(n.range(1-s/a,u,1,l),n.data,a,r,a,c),t===a-1&&this._addTileFeatures(n.range(0,u,s/a,l),n.data,-1,r,a,c),c.features.length?c:null}},{key:"getClusterExpansionZoom",value:function(e){for(var t=this._getOriginZoom(e)-1;t<=this.options.maxZoom;){var r=this.getChildren(e);if(t++,1!==r.length)break;e=r[0].properties.cluster_id}return t}},{key:"_appendLeaves",value:function(e,t,r,n,a){var o,i=f(this.getChildren(t));try{for(i.s();!(o=i.n()).done;){var s=o.value,u=s.properties;if(u&&u.cluster?a+u.point_count<=n?a+=u.point_count:a=this._appendLeaves(e,u.cluster_id,r,n,a):a<n?a++:e.push(s),e.length===r)break}}catch(l){i.e(l)}finally{i.f()}return a}},{key:"_createTree",value:function(e){for(var t=new je(e.length/this.stride|0,this.options.nodeSize,Float32Array),r=0;r<e.length;r+=this.stride)t.add(e[r],e[r+1]);return t.finish(),t.data=e,t}},{key:"_addTileFeatures",value:function(e,t,r,n,a,o){var i,s=f(e);try{for(s.s();!(i=s.n()).done;){var u=i.value*this.stride,l=t[u+5]>1,c=void 0,p=void 0,h=void 0;if(l)c=Fe(t,u,this.clusterProps),p=t[u],h=t[u+1];else{var v=this.points[t[u+3]];c=v.properties;var m=d(v.geometry.coordinates,2),g=m[0],y=m[1];p=Ge(g),h=Ve(y)}var b={type:1,geometry:[[Math.round(this.options.extent*(p*a-r)),Math.round(this.options.extent*(h*a-n))]],tags:c},w=void 0;void 0!==(w=l||this.options.generateId?t[u+3]:this.points[t[u+3]].id)&&(b.id=w),o.features.push(b)}}catch(k){s.e(k)}finally{s.f()}}},{key:"_limitZoom",value:function(e){return Math.max(this.options.minZoom,Math.min(Math.floor(+e),this.options.maxZoom+1))}},{key:"_cluster",value:function(e,t){for(var r=this.options,n=r.radius,a=r.extent,o=r.reduce,i=r.minPoints,s=n/(a*Math.pow(2,t)),u=e.data,l=[],c=this.stride,d=0;d<u.length;d+=c)if(!(u[d+2]<=t)){u[d+2]=t;var p,h=u[d],v=u[d+1],m=e.within(u[d],u[d+1],s),g=u[d+5],y=g,b=f(m);try{for(b.s();!(p=b.n()).done;){var w=p.value*c;u[w+2]>t&&(y+=u[w+5])}}catch(N){b.e(N)}finally{b.f()}if(y>g&&y>=i){var k,x=h*g,M=v*g,P=void 0,C=-1,E=(d/c<<5)+(t+1)+this.points.length,L=f(m);try{for(L.s();!(k=L.n()).done;){var I=k.value*c;if(!(u[I+2]<=t)){u[I+2]=t;var S=u[I+5];x+=u[I]*S,M+=u[I+1]*S,u[I+4]=E,o&&(P||(P=this._map(u,d,!0),C=this.clusterProps.length,this.clusterProps.push(P)),o(P,this._map(u,I)))}}}catch(N){L.e(N)}finally{L.f()}u[d+4]=E,l.push(x/y,M/y,1/0,E,-1,y),o&&l.push(C)}else{for(var _=0;_<c;_++)l.push(u[d+_]);if(y>1){var A,j=f(m);try{for(j.s();!(A=j.n()).done;){var O=A.value*c;if(!(u[O+2]<=t)){u[O+2]=t;for(var T=0;T<c;T++)l.push(u[O+T])}}}catch(N){j.e(N)}finally{j.f()}}}}return l}},{key:"_getOriginId",value:function(e){return e-this.points.length>>5}},{key:"_getOriginZoom",value:function(e){return(e-this.points.length)%32}},{key:"_map",value:function(e,t,r){if(e[t+5]>1){var n=this.clusterProps[e[t+6]];return r?Object.assign({},n):n}var a=this.points[e[t+3]].properties,o=this.options.map(a);return r&&o===a?Object.assign({},o):o}}])}();function Re(e,t,r){return{type:"Feature",id:e[t+3],properties:Fe(e,t,r),geometry:{type:"Point",coordinates:[(o=e[t],360*(o-.5)),(n=e[t+1],a=(180-360*n)*Math.PI/180,360*Math.atan(Math.exp(a))/Math.PI-90)]}};var n,a,o}function Fe(e,t,r){var n=e[t+5],a=n>=1e4?"".concat(Math.round(n/1e3),"k"):n>=1e3?"".concat(Math.round(n/100)/10,"k"):n,o=e[t+6],i=-1===o?{}:Object.assign({},r[o]);return Object.assign(i,{cluster:!0,cluster_id:e[t+3],point_count:n,point_count_abbreviated:a})}function Ge(e){return e/360+.5}function Ve(e){var t=Math.sin(e*Math.PI/180),r=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return r<0?0:r>1?1:r}function We(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(n=Object.getOwnPropertySymbols(e);a<n.length;a++)t.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(e,n[a])&&(r[n[a]]=e[n[a]])}return r}"function"==typeof SuppressedError&&SuppressedError;var $e=function(){return g(function e(){v(this,e)},null,[{key:"isAdvancedMarkerAvailable",value:function(e){return google.maps.marker&&!0===e.getMapCapabilities().isAdvancedMarkersAvailable}},{key:"isAdvancedMarker",value:function(e){return google.maps.marker&&e instanceof google.maps.marker.AdvancedMarkerElement}},{key:"setMap",value:function(e,t){this.isAdvancedMarker(e)?e.map=t:e.setMap(t)}},{key:"getPosition",value:function(e){if(this.isAdvancedMarker(e)){if(e.position){if(e.position instanceof google.maps.LatLng)return e.position;if(Number.isFinite(e.position.lat)&&Number.isFinite(e.position.lng))return new google.maps.LatLng(e.position.lat,e.position.lng)}return new google.maps.LatLng(null)}return e.getPosition()}},{key:"getVisible",value:function(e){return!!this.isAdvancedMarker(e)||e.getVisible()}}])}(),He=function(){return g(function e(t){var r=t.markers,n=t.position;v(this,e),this.markers=[],r&&(this.markers=r),n&&(n instanceof google.maps.LatLng?this._position=n:this._position=new google.maps.LatLng(n))},[{key:"bounds",get:function(){if(0!==this.markers.length||this._position){var e,t=new google.maps.LatLngBounds(this._position,this._position),r=f(this.markers);try{for(r.s();!(e=r.n()).done;){var n=e.value;t.extend($e.getPosition(n))}}catch(a){r.e(a)}finally{r.f()}return t}}},{key:"position",get:function(){return this._position||this.bounds.getCenter()}},{key:"count",get:function(){return this.markers.filter(function(e){return $e.getVisible(e)}).length}},{key:"push",value:function(e){this.markers.push(e)}},{key:"delete",value:function(){this.marker&&($e.setMap(this.marker,null),this.marker=void 0),this.markers.length=0}}])}();function Xe(e){if(null==e)throw Error(arguments.length>1&&void 0!==arguments[1]?arguments[1]:"assertion failed")}var Ke=function(e,t,r,n){var a=e.getBounds();Xe(a);var o=Je(a,t,n);return r.filter(function(e){return o.contains($e.getPosition(e))})},Je=function(e,t,r){var n=et(e,t),a=n.northEast,o=n.southWest,i=tt({northEast:a,southWest:o},r);return rt(i,t)},Ye=function(e,t,r){var n=Je(e,t,r),a=n.getNorthEast(),o=n.getSouthWest();return[o.lng(),o.lat(),a.lng(),a.lat()]},Qe=function(e,t){var r=(t.lat-e.lat)*Math.PI/180,n=(t.lng-e.lng)*Math.PI/180,a=Math.sin(r/2),o=Math.sin(n/2),i=a*a+Math.cos(e.lat*Math.PI/180)*Math.cos(t.lat*Math.PI/180)*o*o;return 6371*(2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i)))},et=function(e,t){var r=t.fromLatLngToDivPixel(e.getNorthEast()),n=t.fromLatLngToDivPixel(e.getSouthWest());return Xe(r),Xe(n),{northEast:r,southWest:n}},tt=function(e,t){var r=e.northEast,n=e.southWest;return r.x+=t,r.y-=t,n.x-=t,n.y+=t,{northEast:r,southWest:n}},rt=function(e,t){var r=e.northEast,n=e.southWest,a=t.fromDivPixelToLatLng(n),o=t.fromDivPixelToLatLng(r);return new google.maps.LatLngBounds(a,o)},nt=function(){return g(function e(t){var r=t.maxZoom,n=void 0===r?16:r;v(this,e),this.maxZoom=n},[{key:"noop",value:function(e){var t=e.markers;return ot(t)}}])}(),at=function(e){function t(e){var r;v(this,t);var n=e.viewportPadding,a=void 0===n?60:n;return(r=i(this,t,[We(e,["viewportPadding"])])).viewportPadding=60,r.viewportPadding=a,r}return l(t,e),g(t,[{key:"calculate",value:function(e){var t=e.markers,r=e.map,n=e.mapCanvasProjection,a=r.getZoom();return Xe(a),a>=this.maxZoom?{clusters:this.noop({markers:t}),changed:!1}:{clusters:this.cluster({markers:Ke(r,n,t,this.viewportPadding),map:r,mapCanvasProjection:n})}}}])}(nt),ot=function(e){return e.map(function(e){return new He({position:$e.getPosition(e),markers:[e]})})},it=function(e){function t(e){var r;v(this,t);var n=e.maxDistance,a=void 0===n?4e4:n,o=e.gridSize,s=void 0===o?40:o;return(r=i(this,t,[We(e,["maxDistance","gridSize"])])).clusters=[],r.state={zoom:-1},r.maxDistance=a,r.gridSize=s,r}return l(t,e),g(t,[{key:"calculate",value:function(e){var t=e.markers,r=e.map,n=e.mapCanvasProjection,a=r.getZoom();Xe(a);var o={zoom:a},i=!1;return this.state.zoom>=this.maxZoom&&o.zoom>=this.maxZoom||(i=!Se(this.state,o)),this.state=o,a>=this.maxZoom?{clusters:this.noop({markers:t}),changed:i}:{clusters:this.cluster({markers:Ke(r,n,t,this.viewportPadding),map:r,mapCanvasProjection:n})}}},{key:"cluster",value:function(e){var t=this,r=e.markers,n=e.map,a=e.mapCanvasProjection;return this.clusters=[],r.forEach(function(e){t.addToClosestCluster(e,n,a)}),this.clusters}},{key:"addToClosestCluster",value:function(e,t,r){for(var n=this.maxDistance,a=null,o=0;o<this.clusters.length;o++){var i=this.clusters[o];Xe(i.bounds);var s=Qe(i.bounds.getCenter().toJSON(),$e.getPosition(e).toJSON());s<n&&(n=s,a=i)}if(a)if(Xe(a.bounds),Je(a.bounds,r,this.gridSize).contains($e.getPosition(e)))a.push(e);else{var u=new He({markers:[e]});this.clusters.push(u)}else{var l=new He({markers:[e]});this.clusters.push(l)}}}])}(at),st=function(e){function t(e){return v(this,t),i(this,t,[We(e,[])])}return l(t,e),g(t,[{key:"calculate",value:function(e){var t=e.markers,r=e.map,n=e.mapCanvasProjection;return{clusters:this.cluster({markers:t,map:r,mapCanvasProjection:n}),changed:!1}}},{key:"cluster",value:function(e){return this.noop(e)}}])}(nt),ut=function(e){function t(e){var r;v(this,t);var n=e.maxZoom,a=e.radius,o=void 0===a?60:a,s=We(e,["maxZoom","radius"]);return(r=i(this,t,[{maxZoom:n}])).markers=[],r.clusters=[],r.state={zoom:-1},r.superCluster=new De(Object.assign({maxZoom:r.maxZoom,radius:o},s)),r}return l(t,e),g(t,[{key:"calculate",value:function(e){var t=!1,r=e.map.getZoom();Xe(r);var n={zoom:r=Math.round(r)};if(!Se(e.markers,this.markers)){t=!0,this.markers=o(e.markers);var a=this.markers.map(function(e){var t=$e.getPosition(e);return{type:"Feature",geometry:{type:"Point",coordinates:[t.lng(),t.lat()]},properties:{marker:e}}});this.superCluster.load(a)}return t||(this.state.zoom<=this.maxZoom||n.zoom<=this.maxZoom)&&(t=!Se(this.state,n)),this.state=n,0===e.markers.length?(this.clusters=[],{clusters:this.clusters,changed:t}):(t&&(this.clusters=this.cluster(e)),{clusters:this.clusters,changed:t})}},{key:"cluster",value:function(e){var t=this,r=e.map.getZoom();return Xe(r),this.superCluster.getClusters([-180,-90,180,90],Math.round(r)).map(function(e){return t.transformCluster(e)})}},{key:"transformCluster",value:function(e){var t=d(e.geometry.coordinates,2),r=t[0],n=t[1],a=e.properties;if(a.cluster)return new He({markers:this.superCluster.getLeaves(a.cluster_id,1/0).map(function(e){return e.properties.marker}),position:{lat:n,lng:r}});var o=a.marker;return new He({markers:[o],position:$e.getPosition(o)})}}])}(nt),lt=function(e){function t(e){var r;v(this,t);var n=e.maxZoom,a=e.radius,o=void 0===a?60:a,s=e.viewportPadding,u=void 0===s?60:s,l=We(e,["maxZoom","radius","viewportPadding"]);return(r=i(this,t,[{maxZoom:n,viewportPadding:u}])).markers=[],r.clusters=[],r.superCluster=new De(Object.assign({maxZoom:r.maxZoom,radius:o},l)),r.state={zoom:-1,view:[0,0,0,0]},r}return l(t,e),g(t,[{key:"calculate",value:function(e){var t=this.getViewportState(e),r=!Se(this.state,t);if(!Se(e.markers,this.markers)){r=!0,this.markers=o(e.markers);var n=this.markers.map(function(e){var t=$e.getPosition(e);return{type:"Feature",geometry:{type:"Point",coordinates:[t.lng(),t.lat()]},properties:{marker:e}}});this.superCluster.load(n)}return r&&(this.clusters=this.cluster(e),this.state=t),{clusters:this.clusters,changed:r}}},{key:"cluster",value:function(e){var t=this,r=this.getViewportState(e);return this.superCluster.getClusters(r.view,r.zoom).map(function(e){return t.transformCluster(e)})}},{key:"transformCluster",value:function(e){var t=d(e.geometry.coordinates,2),r=t[0],n=t[1],a=e.properties;if(a.cluster)return new He({markers:this.superCluster.getLeaves(a.cluster_id,1/0).map(function(e){return e.properties.marker}),position:{lat:n,lng:r}});var o=a.marker;return new He({markers:[o],position:$e.getPosition(o)})}},{key:"getViewportState",value:function(e){var t=e.map.getZoom(),r=e.map.getBounds();return Xe(t),Xe(r),{zoom:Math.round(t),view:Ye(r,e.mapCanvasProjection,this.viewportPadding)}}}])}(at),ct=g(function e(t,r){v(this,e),this.markers={sum:t.length};var n=r.map(function(e){return e.count}),a=n.reduce(function(e,t){return e+t},0);this.clusters={count:r.length,markers:{mean:a/r.length,sum:a,min:Math.min.apply(Math,o(n)),max:Math.max.apply(Math,o(n))}}}),ft=function(){return g(function e(){v(this,e)},[{key:"render",value:function(e,t,r){var n=e.count,a=e.position,o=n>Math.max(10,t.clusters.markers.mean)?"#ff0000":"#0000ff",i='<svg fill="'.concat(o,'" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 240" width="50" height="50">\n<circle cx="120" cy="120" opacity=".6" r="70" />\n<circle cx="120" cy="120" opacity=".3" r="90" />\n<circle cx="120" cy="120" opacity=".2" r="110" />\n<text x="50%" y="50%" style="fill:#fff" text-anchor="middle" font-size="50" dominant-baseline="middle" font-family="roboto,arial,sans-serif">').concat(n,"</text>\n</svg>"),s="Cluster of ".concat(n," markers"),u=Number(google.maps.Marker.MAX_ZINDEX)+n;if($e.isAdvancedMarkerAvailable(r)){var l=(new DOMParser).parseFromString(i,"image/svg+xml").documentElement;l.setAttribute("transform","translate(0 25)");var c={map:r,position:a,zIndex:u,title:s,content:l};return new google.maps.marker.AdvancedMarkerElement(c)}var f={position:a,zIndex:u,title:s,icon:{url:"data:image/svg+xml;base64,".concat(btoa(i)),anchor:new google.maps.Point(25,25)}};return new google.maps.Marker(f)}}])}();var dt,pt=g(function e(){v(this,e),function(e,t){for(var r in t.prototype)e.prototype[r]=t.prototype[r]}(e,google.maps.OverlayView)});!function(e){e.CLUSTERING_BEGIN="clusteringbegin",e.CLUSTERING_END="clusteringend",e.CLUSTER_CLICK="click",e.GMP_CLICK="gmp-click"}(dt||(dt={}));var ht=function(e,t,r){t.bounds&&r.fitBounds(t.bounds)},vt=function(e){function t(e){var r,n=e.map,a=e.markers,s=void 0===a?[]:a,u=e.algorithmOptions,l=void 0===u?{}:u,c=e.algorithm,f=void 0===c?new ut(l):c,d=e.renderer,p=void 0===d?new ft:d,h=e.onClusterClick,m=void 0===h?ht:h;return v(this,t),(r=i(this,t)).map=null,r.idleListener=null,r.markers=o(s),r.clusters=[],r.algorithm=f,r.renderer=p,r.onClusterClick=m,n&&r.setMap(n),r}return l(t,e),g(t,[{key:"addMarker",value:function(e,t){this.markers.includes(e)||(this.markers.push(e),t||this.render())}},{key:"addMarkers",value:function(e,t){var r=this;e.forEach(function(e){r.addMarker(e,!0)}),t||this.render()}},{key:"removeMarker",value:function(e,t){var r=this.markers.indexOf(e);return-1!==r&&($e.setMap(e,null),this.markers.splice(r,1),t||this.render(),!0)}},{key:"removeMarkers",value:function(e,t){var r=this,n=!1;return e.forEach(function(e){n=r.removeMarker(e,!0)||n}),n&&!t&&this.render(),n}},{key:"clearMarkers",value:function(e){this.markers.length=0,e||this.render()}},{key:"render",value:function(){var e=this.getMap();if(e instanceof google.maps.Map&&e.getProjection()){google.maps.event.trigger(this,dt.CLUSTERING_BEGIN,this);var t=this.algorithm.calculate({markers:this.markers,map:e,mapCanvasProjection:this.getProjection()}),r=t.clusters,n=t.changed;if(n||null==n){var a,o=new Set,i=f(r);try{for(i.s();!(a=i.n()).done;){var s=a.value;1==s.markers.length&&o.add(s.markers[0])}}catch(p){i.e(p)}finally{i.f()}var u,l=[],c=f(this.clusters);try{for(c.s();!(u=c.n()).done;){var d=u.value;null!=d.marker&&(1==d.markers.length?o.has(d.marker)||$e.setMap(d.marker,null):l.push(d.marker))}}catch(p){c.e(p)}finally{c.f()}this.clusters=r,this.renderClusters(),requestAnimationFrame(function(){return l.forEach(function(e){return $e.setMap(e,null)})})}google.maps.event.trigger(this,dt.CLUSTERING_END,this)}}},{key:"onAdd",value:function(){var e=this.getMap();Xe(e),this.idleListener=e.addListener("idle",this.render.bind(this)),this.render()}},{key:"onRemove",value:function(){this.idleListener&&google.maps.event.removeListener(this.idleListener),this.reset()}},{key:"reset",value:function(){this.markers.forEach(function(e){return $e.setMap(e,null)}),this.clusters.forEach(function(e){return e.delete()}),this.clusters=[]}},{key:"renderClusters",value:function(){var e=this,t=new ct(this.markers,this.clusters),r=this.getMap();this.clusters.forEach(function(n){if(1===n.markers.length)n.marker=n.markers[0];else if(n.marker=e.renderer.render(n,t,r),n.markers.forEach(function(e){return $e.setMap(e,null)}),e.onClusterClick){var a=$e.isAdvancedMarker(n.marker)?dt.GMP_CLICK:dt.CLUSTER_CLICK;n.marker.addListener(a,function(t){google.maps.event.trigger(e,dt.CLUSTER_CLICK,n),e.onClusterClick(t,n,r)})}$e.setMap(n.marker,r)})}}])}(pt),mt=Object.freeze(Object.defineProperty({__proto__:null,AbstractAlgorithm:nt,AbstractViewportAlgorithm:at,Cluster:He,ClusterStats:ct,DefaultRenderer:ft,GridAlgorithm:it,MarkerClusterer:vt,get MarkerClustererEvents(){return dt},MarkerUtils:$e,NoopAlgorithm:st,SuperClusterAlgorithm:ut,SuperClusterViewportAlgorithm:lt,defaultOnClusterClickHandler:ht,distanceBetweenPoints:Qe,extendBoundsToPaddedViewport:Je,extendPixelBounds:tt,filterMarkersToPaddedViewport:Ke,getPaddedViewport:Ye,noop:ot,pixelBoundsToLatLngBounds:rt},Symbol.toStringTag,{value:"Module"})),gt={class:"map-layout"},yt={class:"map-section"},bt={class:"user-panel"},wt={class:"panel-header"},kt={class:"search-wrapper"},xt={class:"results-count"},Mt=["onClick"],Pt={class:"user-avatar"},Ct=["src","alt"],Et={key:1,class:"avatar-placeholder"},Lt={class:"user-info"},It={class:"user-name"},St={key:0,class:"user-location"},_t={key:1,class:"user-bio"},At={key:2,class:"user-interests"},jt={key:0,class:"empty-state"},Ot={key:0,class:"loading-overlay"},Tt=13,Nt=s({__name:"MapPage",setup:function(r){var n=A(),i=E(),s=u(),l=c(),d=Q().loadGoogleMapsScript,v=p(null),g=p(null),b=p(!1),J=p(""),ee=p([]),te=p([]),re=p(null),ne=p(null),ae=p(!1),oe=p(null),ie=p([]),se=p(null),ue=p(null),le=new Map,ce=new Map,fe=new Map,de=p(new Set);function pe(){var e,t;if(ue.value){var r=function(e){var t,r;!function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=new Set;e.forEach(function(e){var r=(null==e?void 0:e.markers)||[];if(r.length>=2)r.forEach(function(e){e.setVisible(!1),t.add(e)});else if(1===r.length){var n=r[0];n.setVisible(!0),t.add(n)}}),ie.value.forEach(function(e){t.has(e)||e.setVisible(!0)})}((null==e?void 0:e.clusters)||(null===(t=ue.value)||void 0===t||null===(r=t.getClusters)||void 0===r?void 0:r.call(t))||[])};null===(e=(t=ue.value).addListener)||void 0===e||e.call(t,"clusteringend",r),ue.value.getClusters&&r({clusters:ue.value.getClusters()})}}function he(){var e=document.createElement("canvas"),t=40;e.width=t,e.height=t;var r=e.getContext("2d");return r?(r.beginPath(),r.arc(20,20,20,0,2*Math.PI),r.fillStyle="#2d7a4e",r.fill(),r.fillStyle="#ffffff",r.beginPath(),r.arc(20,16,6,0,2*Math.PI),r.fill(),r.beginPath(),r.arc(20,26,8,0,2*Math.PI),r.fill(),e.toDataURL("image/png")):"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAiIGhlaWdodD0iNDAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+PGNpcmNsZSBjeD0iMjAiIGN5PSIyMCIgcj0iMjAiIGZpbGw9IiMyZDdhNGUiLz48L3N2Zz4="}function ve(e){var t=new Map,r=new Map;return e.forEach(function(e){if(e.currentLat&&e.currentLong){var r="".concat(e.currentLat.toFixed(5),"_").concat(e.currentLong.toFixed(5)),n=t.get(r)||[];n.push(e),t.set(r,n)}}),t.forEach(function(e){var t=e.length;if(1!==t){var n=Math.min(360+60*(t-1),840);e.forEach(function(e,a){var o=2*Math.PI*a/t,i=e.currentLat,s=e.currentLong,u=n/111320*Math.sin(o),l=n/(111320*Math.cos(i*Math.PI/180))*Math.cos(o);r.set(e.userId||e.id,{lat:i+u,lng:s+l})})}else{var a=e[0];r.set(a.userId||a.id,{lat:a.currentLat,lng:a.currentLong})}}),r}function me(e){return new Promise(function(t,r){var n=new Image;n.crossOrigin="anonymous";var a=setTimeout(function(){r(new Error("Image load timeout"))},5e3);n.onload=function(){clearTimeout(a);try{var e=document.createElement("canvas"),o=40;e.width=o,e.height=o;var i=e.getContext("2d");if(!i)return void r(new Error("Could not get canvas context"));i.beginPath(),i.arc(20,20,20,0,2*Math.PI),i.closePath(),i.clip(),i.drawImage(n,0,0,o,o),t(e.toDataURL("image/png"))}catch(s){r(s)}},n.onerror=function(){clearTimeout(a),r(new Error("Failed to load image for canvas"))},n.src=e})}function ge(e){return new Promise(function(t,r){var n=new Image,a=setTimeout(function(){r(new Error("Image load timeout"))},5e3);n.onload=function(){clearTimeout(a);try{var e=document.createElement("canvas"),o=40;e.width=o,e.height=o;var i=e.getContext("2d");if(!i)return void r(new Error("Could not get canvas context"));i.beginPath(),i.arc(20,20,20,0,2*Math.PI),i.closePath(),i.clip(),i.drawImage(n,0,0,o,o),t(e.toDataURL("image/png"))}catch(s){r(s)}},n.onerror=function(){clearTimeout(a),r(new Error("Failed to load image"))},n.src=e})}function ye(){return{render:function(e){var t=e.markers||[],r=t.length;if(oe.value){var n=oe.value.getBounds();n&&(r=t.filter(function(e){var t=e.getPosition();return!!t&&n.contains(t)}).length)}var a=r>0?r:e.count,o=Math.min(50+2*Math.sqrt(a),70),i=o/2,s=document.createElement("canvas");s.width=o,s.height=o;var u=s.getContext("2d");if(!u)return new window.google.maps.Marker({position:e.position,label:{text:String(a),color:"white"}});u.beginPath(),u.arc(i,i,i-1,0,2*Math.PI),u.fillStyle="#2d7a4e",u.fill(),u.fillStyle="#ffffff",u.font="bold ".concat(Math.min(13+Math.floor(a/20),16),"px -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif"),u.textAlign="center",u.textBaseline="middle",u.fillText(String(a),i,i);var l=s.toDataURL(),c=new window.google.maps.Marker({position:e.position,icon:{url:l,scaledSize:new window.google.maps.Size(o,o),anchor:new window.google.maps.Point(i,i)},zIndex:Number(window.google.maps.Marker.MAX_ZINDEX)+a});return c.addListener("click",function(){!function(e){if(!oe.value||!e||0===e.length)return;var t=new window.google.maps.LatLngBounds;e.forEach(function(e){var r=e.getPosition();r&&t.extend(r)});var r=t.getCenter(),n=0;e.forEach(function(e){var t,a,o,i,s,u,l,c,f,d=e.getPosition();if(d){var p=(t=r.lat(),a=r.lng(),o=d.lat(),i=d.lng(),s=3959,u=(o-t)*Math.PI/180,l=(i-a)*Math.PI/180,c=Math.sin(u/2)*Math.sin(u/2)+Math.cos(t*Math.PI/180)*Math.cos(o*Math.PI/180)*Math.sin(l/2)*Math.sin(l/2),f=2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)),s*f);n=Math.max(n,p)}});var a=.5,o=1,i=Math.max(a,Math.min(1.5*n,o)),s=i/69,u=i/(69*Math.cos(r.lat()*Math.PI/180)),l=new window.google.maps.LatLngBounds;l.extend(new window.google.maps.LatLng(r.lat()+s,r.lng()+u)),l.extend(new window.google.maps.LatLng(r.lat()-s,r.lng()-u)),oe.value.fitBounds(l,{padding:80}),setTimeout(function(){if(oe.value){var e=oe.value.getZoom();e&&e>Tt&&oe.value.setZoom(Tt)}},100)}(t)}),c}}}function be(e,t,r){return we.apply(this,arguments)}function we(){return(we=a(t().m(function e(r,n,a){var o,i,s;return t().w(function(e){for(;;)switch(e.n){case 0:if(oe.value&&se.value){e.n=1;break}return e.a(2);case 1:return o=ce.get(a)||r,i=xe.value.find(function(e){return(e.userId||e.id)===a})||n,e.n=2,Ie(o,i);case 2:s='\n    <div style="padding: 8px; min-width: 200px;">\n      <h3 style="margin: 0 0 4px 0; font-size: 16px; font-weight: 600;">\n        '.concat(i.fullName||"".concat(i.fname," ").concat(i.lname),"\n      </h3>\n      ").concat(i.bio?'<p style="margin: 0; font-size: 14px; color: #666;">'.concat(i.bio,"</p>"):"","\n      ").concat(i.currentLocationName?'<p style="margin: 4px 0 0 0; font-size: 12px; color: #999;">\n        üìç '.concat(i.currentLocationName,"\n      </p>"):"","\n    </div>\n  "),se.value.setContent(s),Le(o),se.value.open(oe.value,o),ne.value=a,Ee(a);case 3:return e.a(2)}},e)}))).apply(this,arguments)}function ke(){var e={lat:37.7749,lng:-122.4194};if(!ee.value||0===ee.value.length)return e;var t,r=0,n=0,a=0,o=f(ee.value);try{for(o.s();!(t=o.n()).done;){var i=t.value;i.currentLat&&i.currentLong&&(n+=i.currentLat,a+=i.currentLong,r++)}}catch(s){o.e(s)}finally{o.f()}return 0===r?e:{lat:n/r,lng:a/r}}var xe=h(function(){var e=ee.value;if(J.value.trim()){var t=J.value.toLowerCase();e=e.filter(function(e){var r,n,a,o="".concat(e.fname," ").concat(e.lname).toLowerCase(),i=(null===(r=e.bio)||void 0===r?void 0:r.toLowerCase())||"",s=(null===(n=e.interests)||void 0===n?void 0:n.join(" ").toLowerCase())||"",u=(null===(a=e.currentLocationName)||void 0===a?void 0:a.toLowerCase())||"";return o.includes(t)||i.includes(t)||s.includes(t)||u.includes(t)})}return e=null!==ne.value?o(e).sort(function(e,t){var r=e.userId||e.id,n=t.userId||t.id;if(r===ne.value)return-1;if(n===ne.value)return 1;var a=(e.fullName||"".concat(e.fname," ").concat(e.lname)).toLowerCase(),o=(t.fullName||"".concat(t.fname," ").concat(t.lname)).toLowerCase();return a.localeCompare(o)}):o(e).sort(function(e,t){var r=(e.fullName||"".concat(e.fname," ").concat(e.lname)).toLowerCase(),n=(t.fullName||"".concat(t.fname," ").concat(t.lname)).toLowerCase();return r.localeCompare(n)})}),Me=h(function(){return xe.value.filter(function(e){var t=e.userId||e.id;return de.value.has(t)}).sort(function(e,t){var r=(e.fullName||"".concat(e.fname," ").concat(e.lname)).toLowerCase(),n=(t.fullName||"".concat(t.fname," ").concat(t.lname)).toLowerCase();return r.localeCompare(n)})}),Pe=h(function(){return Me.value.length});function Ce(e){var t=e.userId||e.id;return te.value.includes(t)}function Ee(e){re.value=e;var t=fe.get(e);t&&g.value&&(g.value.scrollTo({top:0,behavior:"smooth"}),setTimeout(function(){t.scrollIntoView({behavior:"smooth",block:"center"})},150))}function Le(e){var t,r,n=null!==(t=null===(r=window)||void 0===r||null===(r=r.google)||void 0===r||null===(r=r.maps)||void 0===r||null===(r=r.Marker)||void 0===r?void 0:r.MAX_ZINDEX)&&void 0!==t?t:1e5;e.setZIndex(n+50)}function Ie(e,t){return Se.apply(this,arguments)}function Se(){return(Se=a(t().m(function e(r,n){var a;return t().w(function(e){for(;;)switch(e.p=e.n){case 0:if(!n.profilePicture){e.n=8;break}return e.p=1,e.n=2,ge(n.profilePicture);case 2:a=e.v,e.n=7;break;case 3:return e.p=3,e.v,e.p=4,e.n=5,me(n.profilePicture);case 5:a=e.v,e.n=7;break;case 6:e.p=6,e.v,a=n.profilePicture;case 7:e.n=9;break;case 8:a=he();case 9:r.setIcon({url:a,scaledSize:new google.maps.Size(40,40),anchor:new google.maps.Point(20,20)});case 10:return e.a(2)}},e,null,[[4,6],[1,3]])}))).apply(this,arguments)}function _e(){return(_e=a(t().m(function e(r){var n,a,o,i,s;return t().w(function(e){for(;;)switch(e.n){case 0:if(n=r.userId||r.id,r.currentLat&&r.currentLong&&oe.value){e.n=1;break}return e.a(2);case 1:if(ne.value=n,Ee(n),!(a=ce.get(n))){e.n=3;break}return o=xe.value.find(function(e){return(e.userId||e.id)===n})||r,e.n=2,Ie(a,o);case 2:Le(a),(i=a.getPosition())&&(ae.value=!0,oe.value.setCenter(i),oe.value.setZoom(Tt),setTimeout(function(){ae.value=!1},500),se.value&&(s='\n          <div style="padding: 8px; min-width: 200px;">\n            <h3 style="margin: 0 0 4px 0; font-size: 16px; font-weight: 600;">\n              '.concat(o.fullName||"".concat(o.fname," ").concat(o.lname),"\n            </h3>\n            ").concat(o.bio?'<p style="margin: 0; font-size: 14px; color: #666;">'.concat(o.bio,"</p>"):"","\n            ").concat(o.currentLocationName?'<p style="margin: 4px 0 0 0; font-size: 12px; color: #999;">\n              üìç '.concat(o.currentLocationName,"\n            </p>"):"","\n          </div>\n        "),se.value.setContent(s),se.value.open(oe.value,a)));case 3:return e.a(2)}},e)}))).apply(this,arguments)}function Ae(){1===te.value.length?n.push("/tabs/messages?userId=".concat(te.value[0])):console.log("Group message not yet implemented for:",te.value)}var je=!1,Oe=!1;function Te(){return Ne.apply(this,arguments)}function Ne(){return(Ne=a(t().m(function e(){var r,n,a,o,s,u;return t().w(function(e){for(;;)switch(e.n){case 0:if(!Oe){e.n=1;break}return e.a(2,!1);case 1:if(r=i.query,!(n=r.communityId)){e.n=5;break}if(a=Number(n),isNaN(a)){e.n=5;break}if(!(o=l.getCommunityById(a))){e.n=2;break}return l.setCurrentCommunity(o),console.log("[MapPage] Set community from URL: ".concat(a," (").concat(o.name,")")),Oe=!0,e.a(2,!0);case 2:if(console.log("[MapPage] Community ".concat(a," from URL not in store yet, will set after communities load")),je){e.n=4;break}if(je=!0,!(l.communities.length>0)){e.n=3;break}if(!(s=l.getCommunityById(a))){e.n=3;break}return l.setCurrentCommunity(s),console.log("[MapPage] Set community from URL (communities already loaded): ".concat(a," (").concat(s.name,")")),Oe=!0,je=!1,e.a(2,!0);case 3:u=m(function(){return l.communities},function(e){if(e.length>0){var t=l.getCommunityById(a);t&&(l.setCurrentCommunity(t),console.log("[MapPage] Set community from URL after load: ".concat(a," (").concat(t.name,")")),Oe=!0,u(),je=!1)}},{immediate:!0});case 4:case 5:return e.a(2,!1)}},e)}))).apply(this,arguments)}function ze(){return Ze.apply(this,arguments)}function Ze(){return(Ze=a(t().m(function e(){var r;return t().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,_.create({header:"Session Expired",message:"For security purposes, your session has expired after 60 seconds. Would you like to sign in to continue, or go back to Slack to create a new session?",buttons:[{text:"Go Back to Slack",role:"cancel",handler:function(){window.history.back()}},{text:"Sign In",handler:function(){n.push("/login")}}]});case 1:return r=e.v,e.n=2,r.present();case 2:return e.a(2)}},e)}))).apply(this,arguments)}function qe(){return Ue.apply(this,arguments)}function Ue(){return(Ue=a(t().m(function e(){var r,n,a,o,u,c,f,d,p,h,v;return t().w(function(e){for(;;)switch(e.p=e.n){case 0:if(b.value=!0,e.p=1,n=l.currentCommunityId){e.n=2;break}return ee.value=[],e.a(2);case 2:if(a=i.query.s||"",o=void 0,u=s.isAuthenticated&&(null===(r=s.user)||void 0===r?void 0:r.id),!a||u){e.n=5;break}if(!L.isSessionExpired()){e.n=4;break}return e.n=3,ze();case 3:return ee.value=[],e.a(2);case 4:L.isSecretIdValidated(a)?(console.log("[MapPage] SecretId already validated for this session, not sending in request"),o=void 0):o=a,e.n=6;break;case 5:u&&(console.log("[MapPage] User is fully authenticated, not sending secretId"),o=void 0);case 6:return e.n=7,Y.getProfilesForUserAndCommunity(n,o);case 7:return c=e.v,ee.value=c.filter(function(e){return void 0!==e.currentLat&&null!==e.currentLat&&void 0!==e.currentLong&&null!==e.currentLong&&!isNaN(e.currentLat)&&!isNaN(e.currentLong)}),e.n=8,Fe();case 8:e.n=14;break;case 9:if(e.p=9,v=e.v,console.error("[MapPage] Error loading profiles:",v),p=v.message||(null===(f=v.response)||void 0===f||null===(f=f.data)||void 0===f?void 0:f.message)||"",!(401===(v.status||(null===(d=v.response)||void 0===d?void 0:d.status))||p.toLowerCase().includes("expired")||p.toLowerCase().includes("invalid")||p.toLowerCase().includes("secret"))||!L.isSlackLinkUser()){e.n=11;break}return e.n=10,ze();case 10:e.n=13;break;case 11:return e.n=12,I.create({message:p||"Failed to load map data. Please try again.",duration:4e3,color:"danger"});case 12:return h=e.v,e.n=13,h.present();case 13:ee.value=[];case 14:return e.p=14,b.value=!1,e.f(14);case 15:return e.a(2)}},e,null,[[1,9,14,15]])}))).apply(this,arguments)}function Be(){if(!oe.value)return de.value.clear(),void(ne.value=null);var e=oe.value.getBounds();if(!e)return de.value.clear(),void(ne.value=null);ae.value||(ne.value=null,re.value=null);var t=new Set;ie.value.forEach(function(r){var n=r.getPosition();if(n&&e.contains(n)){var a=le.get(r);a&&t.add(a)}}),xe.value.forEach(function(r){if(r.currentLat&&r.currentLong){var n=new window.google.maps.LatLng(r.currentLat,r.currentLong);if(e.contains(n)){var a=r.userId||r.id;t.add(a)}}}),de.value=t,console.log("[MapPage] Updated visible users: ".concat(t.size," users in view (").concat(ie.value.length," total markers, ").concat(xe.value.length," total profiles)"))}function De(){return Re.apply(this,arguments)}function Re(){return(Re=a(t().m(function e(){var r,n,a;return t().w(function(e){for(;;)switch(e.p=e.n){case 0:if(v.value){e.n=1;break}return e.a(2);case 1:return e.p=1,e.n=2,d();case 2:if(null!==(r=window.google)&&void 0!==r&&r.maps){e.n=3;break}throw new Error("Google Maps not loaded");case 3:return n=ee.value.length>0?ke():{lat:39.8283,lng:-98.5795},oe.value=new google.maps.Map(v.value,{center:n,zoom:ee.value.length>0?10:4,maxZoom:Tt,mapTypeControl:!0,streetViewControl:!1,fullscreenControl:!0,zoomControl:!0}),se.value=new google.maps.InfoWindow,oe.value.addListener("bounds_changed",function(){Be()}),oe.value.addListener("idle",function(){Be()}),e.n=4,Fe();case 4:Be(),e.n=6;break;case 5:e.p=5,a=e.v,console.error("[MapPage] Error initializing map:",a);case 6:return e.a(2)}},e,null,[[1,5]])}))).apply(this,arguments)}function Fe(){return Ge.apply(this,arguments)}function Ge(){return(Ge=a(t().m(function r(){var n,a,o,i,s,u,l,c,d,p,h,v;return t().w(function(r){for(;;)switch(r.p=r.n){case 0:if(oe.value){r.n=1;break}return r.a(2);case 1:ue.value&&(ue.value.clearMarkers(),ue.value=null),ie.value.forEach(function(e){return e.setMap(null)}),ie.value=[],le.clear(),ce.clear(),n=[],a=ve(xe.value),console.log("[MapPage] Processing ".concat(xe.value.length," filtered profiles")),o=f(xe.value),r.p=2,s=t().m(function e(){var r,o,s,u,l,c;return t().w(function(e){for(;;)switch(e.p=e.n){case 0:if((r=i.value).currentLat&&r.currentLong){e.n=1;break}return e.a(2,1);case 1:if(o=a.get(r.userId||r.id),s=null!=o?o:{lat:r.currentLat,lng:r.currentLong},!r.profilePicture){e.n=9;break}return e.p=2,e.n=3,ge(r.profilePicture);case 3:u=e.v,e.n=8;break;case 4:return e.p=4,e.v,e.p=5,e.n=6,me(r.profilePicture);case 6:u=e.v,e.n=8;break;case 7:e.p=7,e.v,console.log("[MapPage] Canvas failed for ".concat(r.fname," ").concat(r.lname,", using direct URL")),u=r.profilePicture;case 8:e.n=10;break;case 9:u=he();case 10:l=r.userId||r.id,c=new google.maps.Marker({position:s,title:r.fullName||"".concat(r.fname," ").concat(r.lname),icon:{url:u,scaledSize:new google.maps.Size(40,40),anchor:new google.maps.Point(20,20)},optimized:!1}),le.set(c,l),ce.set(l,c),c.addListener("click",function(){be(c,r,l)}),n.push(c),ie.value.push(c);case 11:return e.a(2)}},e,null,[[5,7],[2,4]])}),o.s();case 3:if((i=o.n()).done){r.n=6;break}return r.d(e(s()),4);case 4:if(!r.v){r.n=5;break}return r.a(3,5);case 5:r.n=3;break;case 6:r.n=8;break;case 7:r.p=7,h=r.v,o.e(h);case 8:return r.p=8,o.f(),r.f(8);case 9:if(!(n.length>0&&oe.value)){r.n=14;break}return console.log("[MapPage] Creating ".concat(n.length," markers")),r.p=10,r.n=11,S(function(){return Promise.resolve().then(function(){return mt})},void 0);case 11:u=r.v,l=u.SuperClusterAlgorithm,ue.value=new vt({map:oe.value,markers:n,algorithm:new l({radius:60,minPoints:2,maxZoom:Tt}),renderer:ye()}),r.n=13;break;case 12:r.p=12,v=r.v,console.warn("[MapPage] Could not load SuperClusterAlgorithm, using default:",v),ue.value=new vt({map:oe.value,markers:n,renderer:ye()});case 13:pe(),c=new window.google.maps.LatLngBounds,n.forEach(function(e){var t=e.getPosition();t&&c.extend(t)}),n.length>1?(oe.value.fitBounds(c,{padding:50}),setTimeout(function(){oe.value&&oe.value.getZoom()&&oe.value.getZoom()>Tt&&oe.value.setZoom(Tt)},150)):1===n.length&&(d=n[0].getPosition())&&(oe.value.setCenter(d),oe.value.setZoom(Math.min(12,Tt))),setTimeout(function(){Be()},500),r.n=15;break;case 14:console.log("[MapPage] No markers to display"),ee.value.length>0&&(p=ke(),oe.value.setCenter(p),oe.value.setZoom(10)),de.value.clear();case 15:return r.a(2)}},r,null,[[10,12],[2,7,8,9]])}))).apply(this,arguments)}function Ve(){return We.apply(this,arguments)}function We(){return(We=a(t().m(function e(){return t().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,Fe();case 1:return e.a(2)}},e)}))).apply(this,arguments)}return m(function(){return l.currentCommunityId},function(e){e&&qe()}),y(a(t().m(function e(){return t().w(function(e){for(;;)switch(e.n){case 0:return e.n=1,w();case 1:return e.n=2,Te();case 2:return e.n=3,De();case 3:return e.n=4,qe();case 4:return e.a(2)}},e)}))),k(function(){ue.value&&(ue.value.clearMarkers(),ue.value=null),ie.value.forEach(function(e){return e.setMap(null)}),ie.value=[],le.clear(),fe.clear()}),function(e,t){return W(),x(P(C),null,{default:M(function(){return[j(P(V),{fullscreen:!0,class:"map-content"},{default:M(function(){return[O("div",gt,[O("div",yt,[t[3]||(t[3]=O("h1",{class:"map-title"},"Community Map",-1)),O("div",{ref_key:"mapContainer",ref:v,class:"map-container"},null,512)]),O("div",bt,[O("div",wt,[t[4]||(t[4]=O("h2",{class:"panel-title"},"Community Members",-1)),O("div",kt,[j(P(z),{modelValue:J.value,"onUpdate:modelValue":t[0]||(t[0]=function(e){return J.value=e}),placeholder:"Name, interest, hobby, sports team, etc",class:"panel-search",debounce:300,onIonInput:Ve},null,8,["modelValue"])]),O("div",xt,Z(xe.value.length)+" Results | "+Z(Pe.value)+" In View ",1),te.value.length>0?(W(),x(P(q),{key:0,fill:"solid",color:"primary",class:"message-button",onClick:Ae},{default:M(function(){return[U(" Message ("+Z(te.value.length)+") ",1)]}),_:1})):N("",!0)]),O("div",{ref_key:"userListRef",ref:g,class:"user-list"},[(W(!0),T(D,null,B(xe.value,function(e){return W(),T("div",{key:e.userId||e.id,ref_for:!0,ref:function(t){return function(e,t){e&&e instanceof HTMLElement?fe.set(t,e):e&&"$el"in e&&e.$el instanceof HTMLElement&&fe.set(t,e.$el)}(t,e.userId||e.id)},class:$(["user-card",{"user-card-selected":Ce(e),"user-card-highlighted":re.value===(e.userId||e.id)}]),onClick:function(t){return function(e){return _e.apply(this,arguments)}(e)}},[O("div",{class:"user-checkbox",onClick:t[1]||(t[1]=H(function(){},["stop"]))},[j(P(X),{checked:Ce(e),onIonChange:function(t){return function(e){var t=e.userId||e.id,r=te.value.indexOf(t);r>-1?te.value.splice(r,1):te.value.push(t)}(e)}},null,8,["checked","onIonChange"])]),O("div",Pt,[e.profilePicture?(W(),T("img",{key:0,src:e.profilePicture,alt:e.fullName||"".concat(e.fname," ").concat(e.lname),class:"avatar-image"},null,8,Ct)):(W(),T("div",Et,[j(P(R),{icon:P(F)},null,8,["icon"])]))]),O("div",Lt,[O("h3",It,Z(e.fullName||"".concat(e.fname," ").concat(e.lname)),1),e.currentLocationName?(W(),T("p",St,[j(P(R),{icon:P(K)},null,8,["icon"]),U(" "+Z(e.currentLocationName),1)])):N("",!0),e.bio?(W(),T("p",_t,Z(e.bio),1)):N("",!0),e.interests&&e.interests.length>0?(W(),T("div",At,[(W(!0),T(D,null,B(e.interests.slice(0,5),function(e,t){return W(),T("span",{key:t,class:"interest-badge"},Z(e),1)}),128))])):N("",!0)]),O("div",{class:"user-actions",onClick:t[2]||(t[2]=H(function(){},["stop"]))},[j(P(q),{fill:"outline",size:"small",class:"view-profile-btn",onClick:function(t){return r=e.userId||e.id,void n.push("/tabs/profile/".concat(r));var r}},{default:M(function(){return o(t[5]||(t[5]=[U(" View Profile ",-1)]))}),_:1},8,["onClick"])])],10,Mt)}),128)),0===xe.value.length?(W(),T("div",jt,[j(P(R),{icon:P(F),class:"empty-icon"},null,8,["icon"]),t[6]||(t[6]=O("p",null,"No members found",-1))])):N("",!0)],512)])]),b.value?(W(),T("div",Ot,[j(P(G)),t[7]||(t[7]=O("p",null,"Loading map...",-1))])):N("",!0)]}),_:1})]}),_:1})}}});r("default",J(Nt,[["__scopeId","data-v-93de8e1a"]]))}}})}();
