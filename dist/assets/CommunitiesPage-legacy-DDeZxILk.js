!function(){function e(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var n,a,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",r=o.toStringTag||"@@toStringTag";function c(e,o,i,r){var c=o&&o.prototype instanceof l?o:l,s=Object.create(c.prototype);return t(s,"_invoke",function(e,t,o){var i,r,c,l=0,s=o||[],m=!1,d={p:0,n:0,v:n,a:p,f:p.bind(n,4),d:function(e,t){return i=e,r=0,c=n,d.n=t,u}};function p(e,t){for(r=e,c=t,a=0;!m&&l&&!o&&a<s.length;a++){var o,i=s[a],p=d.p,f=i[2];e>3?(o=f===t)&&(c=i[(r=i[4])?5:(r=3,3)],i[4]=i[5]=n):i[0]<=p&&((o=e<2&&p<i[1])?(r=0,d.v=t,d.n=i[1]):p<f&&(o=e<3||i[0]>t||t>f)&&(i[4]=e,i[5]=t,d.n=f,r=0))}if(o||e>1)return u;throw m=!0,t}return function(o,s,f){if(l>1)throw TypeError("Generator is already running");for(m&&1===s&&p(s,f),r=s,c=f;(a=r<2?n:c)||!m;){i||(r?r<3?(r>1&&(d.n=-1),p(r,c)):d.n=c:d.v=c);try{if(l=2,i){if(r||(o="next"),a=i[o]){if(!(a=a.call(i,c)))throw TypeError("iterator result is not an object");if(!a.done)return a;c=a.value,r<2&&(r=0)}else 1===r&&(a=i.return)&&a.call(i),r<2&&(c=TypeError("The iterator does not provide a '"+o+"' method"),r=1);i=n}else if((a=(m=d.n<0)?c:e.call(t,d))!==u)break}catch(a){i=n,r=1,c=a}finally{l=1}}return{value:a,done:m}}}(e,i,r),!0),s}var u={};function l(){}function s(){}function m(){}a=Object.getPrototypeOf;var d=[][i]?a(a([][i]())):(t(a={},i,function(){return this}),a),p=m.prototype=l.prototype=Object.create(d);function f(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,t(e,r,"GeneratorFunction")),e.prototype=Object.create(p),e}return s.prototype=m,t(p,"constructor",m),t(m,"constructor",s),s.displayName="GeneratorFunction",t(m,r,"GeneratorFunction"),t(p),t(p,r,"Generator"),t(p,i,function(){return this}),t(p,"toString",function(){return"[object Generator]"}),(e=function(){return{w:c,m:f}})()}function t(e,n,a,o){var i=Object.defineProperty;try{i({},"",{})}catch(e){i=0}t=function(e,n,a,o){function r(n,a){t(e,n,function(e){return this._invoke(n,a,e)})}n?i?i(e,n,{value:a,enumerable:!o,configurable:!o,writable:!o}):e[n]=a:(r("next",0),r("throw",1),r("return",2))},t(e,n,a,o)}function n(e){return function(e){if(Array.isArray(e))return a(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return a(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?a(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=Array(t);n<t;n++)a[n]=e[n];return a}function o(e,t,n,a,o,i,r){try{var c=e[i](r),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(a,o)}function i(e){return function(){var t=this,n=arguments;return new Promise(function(a,i){var r=e.apply(t,n);function c(e){o(r,a,i,c,u,"next",e)}function u(e){o(r,a,i,c,u,"throw",e)}c(void 0)})}}System.register(["./index-legacy-D3_iwoP0.js"],function(t,a){"use strict";var o,r,c,u,l,s,m,d,p,f,v,g,b,y,h,x,w,k,C,j,P,_,z,S,O,T,E,I,A,F,G,L,N,U;return{setters:[function(e){o=e.F,r=e.a1,c=e.v,u=e.r,l=e.G,s=e.I,m=e.J,d=e.L,p=e.M,f=e.aj,v=e.$,g=e.N,b=e.ak,y=e.al,h=e.W,x=e.am,w=e.O,k=e.Y,C=e.a5,j=e.Z,P=e.aa,_=e.ab,z=e.ag,S=e.a6,O=e.an,T=e.a8,E=e.X,I=e.ao,A=e.Q,F=e.H,G=e.R,L=e.ap,N=e._,U=e.a0}],execute:function(){var Y=document.createElement("style");Y.textContent=".communities-content[data-v-be5a351c]{--background: #f8fafc}.communities-container[data-v-be5a351c]{padding:16px;max-width:100%;margin:0 auto}.search-section[data-v-be5a351c]{margin-bottom:16px}.search-bar[data-v-be5a351c]{--background: white;--border-radius: 12px;--box-shadow: 0 2px 8px rgba(0, 0, 0, .1);padding:0}.loading-state[data-v-be5a351c]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:64px 16px;min-height:40vh}.loading-state p[data-v-be5a351c]{margin-top:16px;color:#64748b;font-size:14px}.communities-list[data-v-be5a351c]{display:flex;flex-direction:column;gap:12px}.community-card[data-v-be5a351c]{background:#fff;border-radius:12px;box-shadow:0 2px 8px rgba(0,0,0,.08);cursor:pointer;transition:all .2s ease}.community-card[data-v-be5a351c]:hover{transform:translateY(-2px);box-shadow:0 4px 12px rgba(0,0,0,.12)}.community-card-content[data-v-be5a351c]{display:flex;align-items:center;padding:16px;gap:16px}.community-logo[data-v-be5a351c]{width:64px;height:64px;border-radius:12px;overflow:hidden;flex-shrink:0;background:linear-gradient(135deg,rgba(45,122,78,.1),rgba(29,185,138,.1));display:flex;align-items:center;justify-content:center}.community-logo img[data-v-be5a351c]{width:100%;height:100%;object-fit:cover}.community-placeholder[data-v-be5a351c]{width:100%;height:100%;display:flex;align-items:center;justify-content:center}.community-placeholder ion-icon[data-v-be5a351c]{font-size:32px;color:var(--color-primary)}.community-info[data-v-be5a351c]{flex:1;min-width:0}.community-name[data-v-be5a351c]{font-size:18px;font-weight:600;color:#1a1a1a;margin:0 0 4px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.community-bio[data-v-be5a351c]{font-size:14px;color:#64748b;margin:0 0 8px;line-height:1.4;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden}.community-leader[data-v-be5a351c]{font-size:12px;color:#94a3b8;display:flex;align-items:center;gap:4px}.leader-label[data-v-be5a351c]{font-weight:500}.leader-name[data-v-be5a351c]{color:#64748b}.community-action[data-v-be5a351c]{flex-shrink:0;display:flex;align-items:center}.join-button[data-v-be5a351c]{--background: var(--color-primary);--color: white;--border-radius: 8px;--padding-start: 16px;--padding-end: 16px;height:36px;font-weight:600;font-size:14px;text-transform:none;margin:0}.empty-state[data-v-be5a351c]{text-align:center;padding:64px 16px;display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:60vh}.empty-icon[data-v-be5a351c]{width:100px;height:100px;margin:0 auto 32px;background:linear-gradient(135deg,rgba(45,122,78,.1),rgba(29,185,138,.1));border-radius:24px;display:flex;align-items:center;justify-content:center;box-shadow:0 4px 16px rgba(45,122,78,.1)}.empty-icon ion-icon[data-v-be5a351c]{font-size:48px;color:var(--color-primary)}.empty-title[data-v-be5a351c]{font-size:24px;font-weight:700;color:#1a1a1a;margin:0 0 12px}.empty-description[data-v-be5a351c]{font-size:16px;color:#64748b;margin:0 0 32px;line-height:1.6;max-width:400px}.empty-action-button[data-v-be5a351c]{--background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-secondary) 100%);--color: white;--border-radius: 12px;--padding-start: 32px;--padding-end: 32px;height:48px;font-weight:600;text-transform:none;font-size:15px;transition:all .2s ease;box-shadow:0 4px 12px rgba(45,122,78,.3)}.empty-action-button[data-v-be5a351c]:hover{transform:translateY(-2px);box-shadow:0 6px 16px rgba(45,122,78,.4)}.empty-action-button[data-v-be5a351c]:active{transform:translateY(0)}@media (min-width: 768px){.communities-container[data-v-be5a351c]{max-width:900px;padding:24px}.communities-list[data-v-be5a351c]{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:16px}.empty-state[data-v-be5a351c]{padding:96px 32px;min-height:70vh}.empty-icon[data-v-be5a351c]{width:120px;height:120px;margin-bottom:40px}.empty-icon ion-icon[data-v-be5a351c]{font-size:56px}.empty-title[data-v-be5a351c]{font-size:28px}.empty-description[data-v-be5a351c]{font-size:18px;max-width:500px}}@media (min-width: 1024px){.communities-container[data-v-be5a351c]{max-width:1000px;padding:32px}}\n",document.head.appendChild(Y);var J={class:"communities-container"},M={class:"search-section"},V={key:0,class:"loading-state"},X={key:1,class:"communities-list"},$={class:"community-card-content"},B={class:"community-logo"},H=["src","alt"],Q={key:1,class:"community-placeholder"},R={class:"community-info"},W={class:"community-name"},Z={key:0,class:"community-bio"},q={key:1,class:"community-leader"},D={class:"leader-name"},K={class:"community-action"},ee={key:2,class:"empty-state"},te={class:"empty-icon"},ne={class:"empty-title"},ae={class:"empty-description"},oe=o({__name:"CommunitiesPage",setup:function(t){var o=F(),U=r(),Y=c(),oe=u([]),ie=u(""),re=u(!1),ce=null;function ue(e){return le.apply(this,arguments)}function le(){return(le=i(e().m(function t(n){var a,o,i;return e().w(function(e){for(;;)switch(e.p=e.n){case 0:return re.value=!0,e.p=1,console.log("[CommunitiesPage] Loading public communities...",n?'search: "'.concat(n,'"'):""),e.n=2,f.getPublicCommunities(n);case 2:a=e.v,console.log("[CommunitiesPage] Loaded communities:",a.length),oe.value=a,e.n=6;break;case 3:return e.p=3,i=e.v,console.error("[CommunitiesPage] Error loading communities:",i),e.n=4,v.create({message:i.message||"Failed to load communities. Please try again.",duration:3e3,color:"danger"});case 4:return o=e.v,e.n=5,o.present();case 5:oe.value=[];case 6:return e.p=6,re.value=!1,e.f(6);case 7:return e.a(2)}},t,null,[[1,3,6,7]])}))).apply(this,arguments)}function se(e){var t=e.target.value||"";ie.value=t,ce&&clearTimeout(ce),ce=setTimeout(function(){t.trim()?ue(t.trim()):ue()},500)}function me(){ie.value="",ue()}function de(){return de=i(e().m(function t(r){var c,u,l,s,m,d,p;return e().w(function(t){for(;;)switch(t.p=t.n){case 0:return t.p=0,re.value=!0,t.n=1,f.joinCommunity(r.id);case 1:return t.n=2,v.create({message:"Successfully joined ".concat(r.name,"!"),duration:2e3,color:"success"});case 2:return c=t.v,t.n=3,c.present();case 3:return t.n=4,N(function(){return a.import("./index-legacy-D3_iwoP0.js").then(function(e){return e.bX})},void 0);case 4:return u=t.v,l=u.authService,t.n=5,l.getUserProfile();case 5:return s=null,t.p=6,t.n=7,f.getCommunityById(r.id);case 7:s=t.v,console.log("[CommunitiesPage] Fetched full community details:",s),t.n=9;break;case 8:t.p=8,t.v,console.warn("[CommunitiesPage] Could not fetch full community details, using provided community data"),s=r;case 9:return window.dispatchEvent(new CustomEvent("communities-updated")),m=function(){var t=i(e().m(function t(){var a,o,i,c,u,l,d,p,v,g=arguments;return e().w(function(e){for(;;)switch(e.p=e.n){case 0:return i=1e3*((o=g.length>0&&void 0!==g[0]?g[0]:0)+1),e.n=1,new Promise(function(e){return setTimeout(e,i)});case 1:if(c=null===(a=Y.user)||void 0===a?void 0:a.id){e.n=2;break}return e.a(2);case 2:return e.p=2,e.n=3,f.getUserCommunities(c,!0);case 3:if(u=e.v,!(l=u.find(function(e){return e.id===r.id}))&&s?(d=[].concat(n(u),[s]),U.setCommunities(d),l=s):l&&U.setCommunities(u),!l){e.n=4;break}U.setCurrentCommunity(l),e.n=6;break;case 4:if(!(o<4)){e.n=5;break}return e.a(2,m(o+1));case 5:U.setCommunities(u);case 6:e.n=8;break;case 7:e.p=7,v=e.v,console.error("[CommunitiesPage] Error selecting new community:",v),s&&(p=U.communities,p.find(function(e){return e.id===s.id})||(U.setCommunities([].concat(n(p),[s])),U.setCurrentCommunity(s),console.log("[CommunitiesPage] Manually added community to store after error")));case 8:return e.a(2)}},t,null,[[2,7]])}));return function(){return t.apply(this,arguments)}}(),t.n=10,m();case 10:o.push("/tabs/home"),t.n=13;break;case 11:return t.p=11,p=t.v,console.error("[CommunitiesPage] Error joining community:",p),t.n=12,v.create({message:p.message||"Failed to join community. Please try again.",duration:3e3,color:"danger"});case 12:return d=t.v,t.n=13,d.present();case 13:return t.p=13,re.value=!1,t.f(13);case 14:return t.a(2)}},t,null,[[6,8],[0,11,13,14]])})),de.apply(this,arguments)}function pe(){console.log("Create community")}return l(function(){ue()}),function(e,t){return G(),s(d(p),null,{default:m(function(){return[g(d(x),null,{default:m(function(){return[g(d(b),null,{default:m(function(){return[g(d(y),null,{default:m(function(){return n(t[1]||(t[1]=[h("Communities",-1)]))}),_:1})]}),_:1})]}),_:1}),g(d(A),{fullscreen:!0,class:"communities-content"},{default:m(function(){return[w("div",J,[w("div",M,[g(d(C),{modelValue:ie.value,"onUpdate:modelValue":t[0]||(t[0]=function(e){return ie.value=e}),placeholder:"Search communities by name...",onIonInput:se,onIonClear:me,debounce:500,class:"search-bar"},null,8,["modelValue"])]),re.value?(G(),k("div",V,[g(d(j),{name:"crescent"}),t[2]||(t[2]=w("p",null,"Loading communities...",-1))])):oe.value.length>0?(G(),k("div",X,[(G(!0),k(P,null,_(oe.value,function(e){return G(),k("div",{key:e.id,class:"community-card"},[w("div",$,[w("div",B,[e.logo?(G(),k("img",{key:0,src:e.logo,alt:e.name},null,8,H)):(G(),k("div",Q,[g(d(S),{icon:d(O)},null,8,["icon"])]))]),w("div",R,[w("h3",W,T(e.name),1),e.bio?(G(),k("p",Z,T(e.bio),1)):z("",!0),e.leader?(G(),k("div",q,[t[3]||(t[3]=w("span",{class:"leader-label"},"Leader:",-1)),w("span",D,T(e.leader.fname)+" "+T(e.leader.lname),1)])):z("",!0)]),w("div",K,[g(d(E),{fill:"solid",size:"small",class:"join-button",onClick:L(function(t){return function(e){return de.apply(this,arguments)}(e)},["stop"]),disabled:re.value},{default:m(function(){return n(t[4]||(t[4]=[h(" Join ",-1)]))}),_:1},8,["onClick","disabled"])])])])}),128))])):(G(),k("div",ee,[w("div",te,[g(d(S),{icon:d(O)},null,8,["icon"])]),w("h3",ne,T(ie.value?"No communities found":"No communities yet"),1),w("p",ae,T(ie.value?'No communities found matching "'.concat(ie.value,'". Try a different search term.'):"Join or create a community to get started!"),1),ie.value?z("",!0):(G(),s(d(E),{key:0,fill:"solid",class:"empty-action-button",onClick:pe},{default:m(function(){return[g(d(S),{icon:d(I),slot:"start"},null,8,["icon"]),t[5]||(t[5]=h(" Create Community ",-1))]}),_:1}))]))])]}),_:1})]}),_:1})}}});t("default",U(oe,[["__scopeId","data-v-be5a351c"]]))}}})}();
