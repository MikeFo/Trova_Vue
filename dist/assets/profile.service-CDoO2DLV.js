import{v as l,x as i}from"./index-CkJ7yJ3n.js";function c(r){return typeof r=="string"?r:r.name}class p{async saveProfile(e){var u;if(!((u=l().user)==null?void 0:u.id))throw new Error("User not authenticated");const t={};return e.firstName&&(t.fname=e.firstName),e.lastName&&(t.lname=e.lastName),e.passions&&e.passions.length>0&&(t.passions=e.passions.map(c),t.passionIds=e.passions.map(n=>typeof n=="string"?null:n.id).filter(n=>n!==null)),e.interests&&e.interests.length>0&&(t.interests=e.interests.map(c),t.interestIds=e.interests.map(n=>typeof n=="string"?null:n.id).filter(n=>n!==null)),e.photo&&(t.photo=e.photo),e.locations&&e.locations.length>0&&(t.locations=e.locations),e.currentEmployer&&(t.currentEmployer=e.currentEmployer),e.pastEmployers&&e.pastEmployers.length>0&&(t.pastEmployers=e.pastEmployers),e.jobTitle&&(t.jobTitle=e.jobTitle),e.school&&(t.school=e.school),e.degree&&(t.degree=e.degree),e.intentions&&e.intentions.length>0&&(t.intentions=e.intentions.map(c),t.intentionIds=e.intentions.map(n=>typeof n=="string"?null:n.id).filter(n=>n!==null)),i.patch("/profile/edit",t)}async completeSetup(){const e=l(),o=e.user;if(!o||!o.id)throw console.error("completeSetup: User not authenticated. User object:",o),new Error("User not authenticated. Please log in again.");console.log("completeSetup: Updating setup step for user ".concat(o.id));try{const s={...o,setupStep:"complete"};delete s.isOnline,delete s.profilePictureThumbnail,delete s.profilePicture175x175;const t=await i.patch("/users/".concat(o.id,"/edit?background=false"),s);return console.log("completeSetup: Setup step updated successfully",t),t?e.setUser(t):e.updateSetupStep("complete"),t}catch(s){throw console.error("completeSetup: Error updating setup step:",s),e.updateSetupStep("complete"),s}}async getProfilesForUserAndCommunity(e,o){try{const s={communityId:e};return o&&(s.s=o),await i.post("/communities/getProfilesForUserAndCommunity",s)||[]}catch(s){throw console.error("[ProfileService] Failed to fetch profiles:",s),s}}}const d=new p;export{p as ProfileService,d as profileService};
